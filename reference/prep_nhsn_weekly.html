<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare NHSN weekly data — prep_nhsn_weekly • fiphde</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare NHSN weekly data — prep_nhsn_weekly"><meta name="description" content="This function prepares data retrieved from the weekly aggregated NHSN hospital respiratory data API. The data must be first retrieved using get_nhsn_weekly. Once pulled from the API, this function will conditionally adjust partial reporting and add extended time series data (see 'Details' for more information). The preparation also includes joining to internal data prepared to estimate the historical severity of each epiweek."><meta property="og:description" content="This function prepares data retrieved from the weekly aggregated NHSN hospital respiratory data API. The data must be first retrieved using get_nhsn_weekly. Once pulled from the API, this function will conditionally adjust partial reporting and add extended time series data (see 'Details' for more information). The preparation also includes joining to internal data prepared to estimate the historical severity of each epiweek."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fiphde</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic_usage.html">Basic Usage</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/signaturescience/fiphde/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare NHSN weekly data</h1>
      <small class="dont-index">Source: <a href="https://github.com/signaturescience/fiphde/blob/main/R/prep.R" class="external-link"><code>R/prep.R</code></a></small>
      <div class="d-none name"><code>prep_nhsn_weekly.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function prepares data retrieved from the weekly aggregated NHSN hospital respiratory data API. The data must be first retrieved using <a href="get_nhsn_weekly.html">get_nhsn_weekly</a>. Once pulled from the API, this function will conditionally adjust partial reporting and add extended time series data (see 'Details' for more information). The preparation also includes joining to internal data prepared to estimate the historical severity of each epiweek.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prep_nhsn_weekly</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  adjust_partial <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  trim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  statesonly <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  augment <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  augment_stop <span class="op">=</span> <span class="st">"2020-10-18"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>Weekly hospital utilization data from <a href="get_nhsn_weekly.html">get_nhsn_weekly</a></p></dd>


<dt id="arg-adjust-partial">adjust_partial<a class="anchor" aria-label="anchor" href="#arg-adjust-partial"></a></dt>
<dd><p>Logical as to whether or not the partial reporting should be adjusted (see 'Details' for more); default is <code>TRUE</code></p></dd>


<dt id="arg-trim">trim<a class="anchor" aria-label="anchor" href="#arg-trim"></a></dt>
<dd><p>Named list with elements for epiyear and epiweek corresponding to the minimum epidemiological week to retain; default is set to <code>NULL</code> the data will not be trimmed; to override the default use a named list (e.g., <code>list(epiyear=2020, epiweek=43)</code>)</p></dd>


<dt id="arg-statesonly">statesonly<a class="anchor" aria-label="anchor" href="#arg-statesonly"></a></dt>
<dd><p>Logical as to whether or not the data should be limited to states and DC (i.e., no other territories included); default is <code>TRUE</code></p></dd>


<dt id="arg-augment">augment<a class="anchor" aria-label="anchor" href="#arg-augment"></a></dt>
<dd><p>Logical as to whether or not the data should be augmented with NHSN hospitalizations imputed backwards in time (see 'Details' for more); default is <code>FALSE</code></p></dd>


<dt id="arg-augment-stop">augment_stop<a class="anchor" aria-label="anchor" href="#arg-augment-stop"></a></dt>
<dd><p>Date at which the time series imputation data should stop; yyyy-mm-dd format; only used if "augment" is <code>TRUE</code> default is <code>"2020-10-18"</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>tibble</code> with hospitalization data summarized to epiyear/epiweek with the following columns:</p><ul><li><p><strong>abbreviation</strong>: Abbreviation for the location</p></li>
<li><p><strong>location</strong>: FIPS code for the location</p></li>
<li><p><strong>week_start</strong>: Date of beginning (Sunday) of the given epidemiological week</p></li>
<li><p><strong>monday</strong>: Date of Monday of the given epidemiological week</p></li>
<li><p><strong>week_end</strong>: Date of end (Saturday) of the given epidemiological week</p></li>
<li><p><strong>epiyear</strong>: Year of reporting (in epidemiological week calendar)</p></li>
<li><p><strong>epiweek</strong>: Week of reporting (in epidemiological week calendar)</p></li>
<li><p><strong>flu.admits</strong>: Count of flu cases among admitted patients on previous week</p></li>
<li><p><strong>flu.admits.cov</strong>: Coverage (number of hospitals reporting) for incident flu cases</p></li>
<li><p><strong>ili_mean</strong>: Estimate of historical ILI activity for the given epidemiological week</p></li>
<li><p><strong>ili_rank</strong>: Rank of the given epidemiological week in terms of ILI activity across season (1 being highest average activity)</p></li>
<li><p><strong>hosp_mean</strong>: Estimate of historical flu hospitalization rate for the given epidemiological week</p></li>
<li><p><strong>hosp_rank</strong>: Rank of the given epidemiological week in terms of flu hospitalizations across season (1 being highest average activity)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The weekly aggregated data from NHSN includes locations that may have incomplete coverage of hospitals reporting (see <a href="https://data.cdc.gov/Public-Health-Surveillance/Weekly-Hospital-Respiratory-Data-HRD-Metrics-by-Ju/mpgq-jmmr/about_data" class="external-link">https://data.cdc.gov/Public-Health-Surveillance/Weekly-Hospital-Respiratory-Data-HRD-Metrics-by-Ju/mpgq-jmmr/about_data</a> for more information). The preparation in this function includes an optional step triggered by the "adjust_partial" argument to find the maximum coverage at any time point for each location, then adjusts the reported counts by a factor of X / Y_t, where X is the maximum coverage and Y_t is the coverage at time point t. If the coverage for the given week is near or equal to the maximum observed coverage, then the counts will have little to no effect on the counts. Note that this should be used with caution, as it is possible that some locations may have non-uniform reporting behaviors, especially during non-mandatory NHSN reporting windows. In other words, the counts may be adjusted using reported values from healthcare facilities that may be of a different size, serve different communities, or otherwise have different characteristics than the facilities that did not report.</p>
<p>The preparation for the weekly flu hospitalization data includes an option to "augment" the input time series. The augmentation is based on an extended time series that was developed with an imputation approach. The extended time series estimates flu hospitalizations at the state-level in years before NHSN reporting became available. If the user decides to include the imputed data, then the time series is extended backwards in time from the "augment_stop" date (defaults to October 18, 2020). The prepended data augmentation is formatted to match the true NSHN reporting. For more details on the data augmentation approach, refer to the publication: <a href="https://www.medrxiv.org/content/10.1101/2024.07.31.24311314" class="external-link">https://www.medrxiv.org/content/10.1101/2024.07.31.24311314</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://www.medrxiv.org/content/10.1101/2024.07.31.24311314" class="external-link">https://www.medrxiv.org/content/10.1101/2024.07.31.24311314</a></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by VP Nagraj, Desiree Williams, Shakeel Jessa, Chris Hulme-Lowe, Stephen Turner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

