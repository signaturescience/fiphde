[{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"GNU General Public License","title":"GNU General Public License","text":"Version 3, 29 June 2007Copyright © 2007 Free Software Foundation, Inc. <http://fsf.org/> Everyone permitted copy distribute verbatim copies license document, changing allowed.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"preamble","dir":"","previous_headings":"","what":"Preamble","title":"GNU General Public License","text":"GNU General Public License free, copyleft license software kinds works. licenses software practical works designed take away freedom share change works. contrast, GNU General Public License intended guarantee freedom share change versions program–make sure remains free software users. , Free Software Foundation, use GNU General Public License software; applies also work released way authors. can apply programs, . speak free software, referring freedom, price. General Public Licenses designed make sure freedom distribute copies free software (charge wish), receive source code can get want , can change software use pieces new free programs, know can things. protect rights, need prevent others denying rights asking surrender rights. Therefore, certain responsibilities distribute copies software, modify : responsibilities respect freedom others. example, distribute copies program, whether gratis fee, must pass recipients freedoms received. must make sure , , receive can get source code. must show terms know rights. Developers use GNU GPL protect rights two steps: (1) assert copyright software, (2) offer License giving legal permission copy, distribute /modify . developers’ authors’ protection, GPL clearly explains warranty free software. users’ authors’ sake, GPL requires modified versions marked changed, problems attributed erroneously authors previous versions. devices designed deny users access install run modified versions software inside , although manufacturer can . fundamentally incompatible aim protecting users’ freedom change software. systematic pattern abuse occurs area products individuals use, precisely unacceptable. Therefore, designed version GPL prohibit practice products. problems arise substantially domains, stand ready extend provision domains future versions GPL, needed protect freedom users. Finally, every program threatened constantly software patents. States allow patents restrict development use software general-purpose computers, , wish avoid special danger patents applied free program make effectively proprietary. prevent , GPL assures patents used render program non-free. precise terms conditions copying, distribution modification follow.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_0-definitions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"0. Definitions","title":"GNU General Public License","text":"“License” refers version 3 GNU General Public License. “Copyright” also means copyright-like laws apply kinds works, semiconductor masks. “Program” refers copyrightable work licensed License. licensee addressed “”. “Licensees” “recipients” may individuals organizations. “modify” work means copy adapt part work fashion requiring copyright permission, making exact copy. resulting work called “modified version” earlier work work “based ” earlier work. “covered work” means either unmodified Program work based Program. “propagate” work means anything , without permission, make directly secondarily liable infringement applicable copyright law, except executing computer modifying private copy. Propagation includes copying, distribution (without modification), making available public, countries activities well. “convey” work means kind propagation enables parties make receive copies. Mere interaction user computer network, transfer copy, conveying. interactive user interface displays “Appropriate Legal Notices” extent includes convenient prominently visible feature (1) displays appropriate copyright notice, (2) tells user warranty work (except extent warranties provided), licensees may convey work License, view copy License. interface presents list user commands options, menu, prominent item list meets criterion.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_1-source-code","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"1. Source Code","title":"GNU General Public License","text":"“source code” work means preferred form work making modifications . “Object code” means non-source form work. “Standard Interface” means interface either official standard defined recognized standards body, , case interfaces specified particular programming language, one widely used among developers working language. “System Libraries” executable work include anything, work whole, () included normal form packaging Major Component, part Major Component, (b) serves enable use work Major Component, implement Standard Interface implementation available public source code form. “Major Component”, context, means major essential component (kernel, window system, ) specific operating system () executable work runs, compiler used produce work, object code interpreter used run . “Corresponding Source” work object code form means source code needed generate, install, (executable work) run object code modify work, including scripts control activities. However, include work’s System Libraries, general-purpose tools generally available free programs used unmodified performing activities part work. example, Corresponding Source includes interface definition files associated source files work, source code shared libraries dynamically linked subprograms work specifically designed require, intimate data communication control flow subprograms parts work. Corresponding Source need include anything users can regenerate automatically parts Corresponding Source. Corresponding Source work source code form work.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_2-basic-permissions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"2. Basic Permissions","title":"GNU General Public License","text":"rights granted License granted term copyright Program, irrevocable provided stated conditions met. License explicitly affirms unlimited permission run unmodified Program. output running covered work covered License output, given content, constitutes covered work. License acknowledges rights fair use equivalent, provided copyright law. may make, run propagate covered works convey, without conditions long license otherwise remains force. may convey covered works others sole purpose make modifications exclusively , provide facilities running works, provided comply terms License conveying material control copyright. thus making running covered works must exclusively behalf, direction control, terms prohibit making copies copyrighted material outside relationship . Conveying circumstances permitted solely conditions stated . Sublicensing allowed; section 10 makes unnecessary.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_3-protecting-users-legal-rights-from-anti-circumvention-law","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"3. Protecting Users’ Legal Rights From Anti-Circumvention Law","title":"GNU General Public License","text":"covered work shall deemed part effective technological measure applicable law fulfilling obligations article 11 WIPO copyright treaty adopted 20 December 1996, similar laws prohibiting restricting circumvention measures. convey covered work, waive legal power forbid circumvention technological measures extent circumvention effected exercising rights License respect covered work, disclaim intention limit operation modification work means enforcing, work’s users, third parties’ legal rights forbid circumvention technological measures.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_4-conveying-verbatim-copies","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"4. Conveying Verbatim Copies","title":"GNU General Public License","text":"may convey verbatim copies Program’s source code receive , medium, provided conspicuously appropriately publish copy appropriate copyright notice; keep intact notices stating License non-permissive terms added accord section 7 apply code; keep intact notices absence warranty; give recipients copy License along Program. may charge price price copy convey, may offer support warranty protection fee.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_5-conveying-modified-source-versions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"5. Conveying Modified Source Versions","title":"GNU General Public License","text":"may convey work based Program, modifications produce Program, form source code terms section 4, provided also meet conditions: ) work must carry prominent notices stating modified , giving relevant date. b) work must carry prominent notices stating released License conditions added section 7. requirement modifies requirement section 4 “keep intact notices”. c) must license entire work, whole, License anyone comes possession copy. License therefore apply, along applicable section 7 additional terms, whole work, parts, regardless packaged. License gives permission license work way, invalidate permission separately received . d) work interactive user interfaces, must display Appropriate Legal Notices; however, Program interactive interfaces display Appropriate Legal Notices, work need make . compilation covered work separate independent works, nature extensions covered work, combined form larger program, volume storage distribution medium, called “aggregate” compilation resulting copyright used limit access legal rights compilation’s users beyond individual works permit. Inclusion covered work aggregate cause License apply parts aggregate.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_6-conveying-non-source-forms","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"6. Conveying Non-Source Forms","title":"GNU General Public License","text":"may convey covered work object code form terms sections 4 5, provided also convey machine-readable Corresponding Source terms License, one ways: ) Convey object code , embodied , physical product (including physical distribution medium), accompanied Corresponding Source fixed durable physical medium customarily used software interchange. b) Convey object code , embodied , physical product (including physical distribution medium), accompanied written offer, valid least three years valid long offer spare parts customer support product model, give anyone possesses object code either (1) copy Corresponding Source software product covered License, durable physical medium customarily used software interchange, price reasonable cost physically performing conveying source, (2) access copy Corresponding Source network server charge. c) Convey individual copies object code copy written offer provide Corresponding Source. alternative allowed occasionally noncommercially, received object code offer, accord subsection 6b. d) Convey object code offering access designated place (gratis charge), offer equivalent access Corresponding Source way place charge. need require recipients copy Corresponding Source along object code. place copy object code network server, Corresponding Source may different server (operated third party) supports equivalent copying facilities, provided maintain clear directions next object code saying find Corresponding Source. Regardless server hosts Corresponding Source, remain obligated ensure available long needed satisfy requirements. e) Convey object code using peer--peer transmission, provided inform peers object code Corresponding Source work offered general public charge subsection 6d. separable portion object code, whose source code excluded Corresponding Source System Library, need included conveying object code work. “User Product” either (1) “consumer product”, means tangible personal property normally used personal, family, household purposes, (2) anything designed sold incorporation dwelling. determining whether product consumer product, doubtful cases shall resolved favor coverage. particular product received particular user, “normally used” refers typical common use class product, regardless status particular user way particular user actually uses, expects expected use, product. product consumer product regardless whether product substantial commercial, industrial non-consumer uses, unless uses represent significant mode use product. “Installation Information” User Product means methods, procedures, authorization keys, information required install execute modified versions covered work User Product modified version Corresponding Source. information must suffice ensure continued functioning modified object code case prevented interfered solely modification made. convey object code work section , , specifically use , User Product, conveying occurs part transaction right possession use User Product transferred recipient perpetuity fixed term (regardless transaction characterized), Corresponding Source conveyed section must accompanied Installation Information. requirement apply neither third party retains ability install modified object code User Product (example, work installed ROM). requirement provide Installation Information include requirement continue provide support service, warranty, updates work modified installed recipient, User Product modified installed. Access network may denied modification materially adversely affects operation network violates rules protocols communication across network. Corresponding Source conveyed, Installation Information provided, accord section must format publicly documented (implementation available public source code form), must require special password key unpacking, reading copying.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_7-additional-terms","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"7. Additional Terms","title":"GNU General Public License","text":"“Additional permissions” terms supplement terms License making exceptions one conditions. Additional permissions applicable entire Program shall treated though included License, extent valid applicable law. additional permissions apply part Program, part may used separately permissions, entire Program remains governed License without regard additional permissions. convey copy covered work, may option remove additional permissions copy, part . (Additional permissions may written require removal certain cases modify work.) may place additional permissions material, added covered work, can give appropriate copyright permission. Notwithstanding provision License, material add covered work, may (authorized copyright holders material) supplement terms License terms: ) Disclaiming warranty limiting liability differently terms sections 15 16 License; b) Requiring preservation specified reasonable legal notices author attributions material Appropriate Legal Notices displayed works containing ; c) Prohibiting misrepresentation origin material, requiring modified versions material marked reasonable ways different original version; d) Limiting use publicity purposes names licensors authors material; e) Declining grant rights trademark law use trade names, trademarks, service marks; f) Requiring indemnification licensors authors material anyone conveys material (modified versions ) contractual assumptions liability recipient, liability contractual assumptions directly impose licensors authors. non-permissive additional terms considered “restrictions” within meaning section 10. Program received , part , contains notice stating governed License along term restriction, may remove term. license document contains restriction permits relicensing conveying License, may add covered work material governed terms license document, provided restriction survive relicensing conveying. add terms covered work accord section, must place, relevant source files, statement additional terms apply files, notice indicating find applicable terms. Additional terms, permissive non-permissive, may stated form separately written license, stated exceptions; requirements apply either way.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_8-termination","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"8. Termination","title":"GNU General Public License","text":"may propagate modify covered work except expressly provided License. attempt otherwise propagate modify void, automatically terminate rights License (including patent licenses granted third paragraph section 11). However, cease violation License, license particular copyright holder reinstated () provisionally, unless copyright holder explicitly finally terminates license, (b) permanently, copyright holder fails notify violation reasonable means prior 60 days cessation. Moreover, license particular copyright holder reinstated permanently copyright holder notifies violation reasonable means, first time received notice violation License (work) copyright holder, cure violation prior 30 days receipt notice. Termination rights section terminate licenses parties received copies rights License. rights terminated permanently reinstated, qualify receive new licenses material section 10.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_9-acceptance-not-required-for-having-copies","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"9. Acceptance Not Required for Having Copies","title":"GNU General Public License","text":"required accept License order receive run copy Program. Ancillary propagation covered work occurring solely consequence using peer--peer transmission receive copy likewise require acceptance. However, nothing License grants permission propagate modify covered work. actions infringe copyright accept License. Therefore, modifying propagating covered work, indicate acceptance License .","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_10-automatic-licensing-of-downstream-recipients","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"10. Automatic Licensing of Downstream Recipients","title":"GNU General Public License","text":"time convey covered work, recipient automatically receives license original licensors, run, modify propagate work, subject License. responsible enforcing compliance third parties License. “entity transaction” transaction transferring control organization, substantially assets one, subdividing organization, merging organizations. propagation covered work results entity transaction, party transaction receives copy work also receives whatever licenses work party’s predecessor interest give previous paragraph, plus right possession Corresponding Source work predecessor interest, predecessor can get reasonable efforts. may impose restrictions exercise rights granted affirmed License. example, may impose license fee, royalty, charge exercise rights granted License, may initiate litigation (including cross-claim counterclaim lawsuit) alleging patent claim infringed making, using, selling, offering sale, importing Program portion .","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_11-patents","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"11. Patents","title":"GNU General Public License","text":"“contributor” copyright holder authorizes use License Program work Program based. work thus licensed called contributor’s “contributor version”. contributor’s “essential patent claims” patent claims owned controlled contributor, whether already acquired hereafter acquired, infringed manner, permitted License, making, using, selling contributor version, include claims infringed consequence modification contributor version. purposes definition, “control” includes right grant patent sublicenses manner consistent requirements License. contributor grants non-exclusive, worldwide, royalty-free patent license contributor’s essential patent claims, make, use, sell, offer sale, import otherwise run, modify propagate contents contributor version. following three paragraphs, “patent license” express agreement commitment, however denominated, enforce patent (express permission practice patent covenant sue patent infringement). “grant” patent license party means make agreement commitment enforce patent party. convey covered work, knowingly relying patent license, Corresponding Source work available anyone copy, free charge terms License, publicly available network server readily accessible means, must either (1) cause Corresponding Source available, (2) arrange deprive benefit patent license particular work, (3) arrange, manner consistent requirements License, extend patent license downstream recipients. “Knowingly relying” means actual knowledge , patent license, conveying covered work country, recipient’s use covered work country, infringe one identifiable patents country reason believe valid. , pursuant connection single transaction arrangement, convey, propagate procuring conveyance , covered work, grant patent license parties receiving covered work authorizing use, propagate, modify convey specific copy covered work, patent license grant automatically extended recipients covered work works based . patent license “discriminatory” include within scope coverage, prohibits exercise , conditioned non-exercise one rights specifically granted License. may convey covered work party arrangement third party business distributing software, make payment third party based extent activity conveying work, third party grants, parties receive covered work , discriminatory patent license () connection copies covered work conveyed (copies made copies), (b) primarily connection specific products compilations contain covered work, unless entered arrangement, patent license granted, prior 28 March 2007. Nothing License shall construed excluding limiting implied license defenses infringement may otherwise available applicable patent law.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_12-no-surrender-of-others-freedom","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"12. No Surrender of Others’ Freedom","title":"GNU General Public License","text":"conditions imposed (whether court order, agreement otherwise) contradict conditions License, excuse conditions License. convey covered work satisfy simultaneously obligations License pertinent obligations, consequence may convey . example, agree terms obligate collect royalty conveying convey Program, way satisfy terms License refrain entirely conveying Program.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_13-use-with-the-gnu-affero-general-public-license","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"13. Use with the GNU Affero General Public License","title":"GNU General Public License","text":"Notwithstanding provision License, permission link combine covered work work licensed version 3 GNU Affero General Public License single combined work, convey resulting work. terms License continue apply part covered work, special requirements GNU Affero General Public License, section 13, concerning interaction network apply combination .","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_14-revised-versions-of-this-license","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"14. Revised Versions of this License","title":"GNU General Public License","text":"Free Software Foundation may publish revised /new versions GNU General Public License time time. new versions similar spirit present version, may differ detail address new problems concerns. version given distinguishing version number. Program specifies certain numbered version GNU General Public License “later version” applies , option following terms conditions either numbered version later version published Free Software Foundation. Program specify version number GNU General Public License, may choose version ever published Free Software Foundation. Program specifies proxy can decide future versions GNU General Public License can used, proxy’s public statement acceptance version permanently authorizes choose version Program. Later license versions may give additional different permissions. However, additional obligations imposed author copyright holder result choosing follow later version.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_15-disclaimer-of-warranty","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"15. Disclaimer of Warranty","title":"GNU General Public License","text":"WARRANTY PROGRAM, EXTENT PERMITTED APPLICABLE LAW. EXCEPT OTHERWISE STATED WRITING COPYRIGHT HOLDERS /PARTIES PROVIDE PROGRAM “” WITHOUT WARRANTY KIND, EITHER EXPRESSED IMPLIED, INCLUDING, LIMITED , IMPLIED WARRANTIES MERCHANTABILITY FITNESS PARTICULAR PURPOSE. ENTIRE RISK QUALITY PERFORMANCE PROGRAM . PROGRAM PROVE DEFECTIVE, ASSUME COST NECESSARY SERVICING, REPAIR CORRECTION.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_16-limitation-of-liability","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"16. Limitation of Liability","title":"GNU General Public License","text":"EVENT UNLESS REQUIRED APPLICABLE LAW AGREED WRITING COPYRIGHT HOLDER, PARTY MODIFIES /CONVEYS PROGRAM PERMITTED , LIABLE DAMAGES, INCLUDING GENERAL, SPECIAL, INCIDENTAL CONSEQUENTIAL DAMAGES ARISING USE INABILITY USE PROGRAM (INCLUDING LIMITED LOSS DATA DATA RENDERED INACCURATE LOSSES SUSTAINED THIRD PARTIES FAILURE PROGRAM OPERATE PROGRAMS), EVEN HOLDER PARTY ADVISED POSSIBILITY DAMAGES.","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"id_17-interpretation-of-sections-15-and-16","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"17. Interpretation of Sections 15 and 16","title":"GNU General Public License","text":"disclaimer warranty limitation liability provided given local legal effect according terms, reviewing courts shall apply local law closely approximates absolute waiver civil liability connection Program, unless warranty assumption liability accompanies copy Program return fee. END TERMS CONDITIONS","code":""},{"path":"https://signaturescience.github.io/fiphde/LICENSE.html","id":"how-to-apply-these-terms-to-your-new-programs","dir":"","previous_headings":"","what":"How to Apply These Terms to Your New Programs","title":"GNU General Public License","text":"develop new program, want greatest possible use public, best way achieve make free software everyone can redistribute change terms. , attach following notices program. safest attach start source file effectively state exclusion warranty; file least “copyright” line pointer full notice found. Also add information contact electronic paper mail. program terminal interaction, make output short notice like starts interactive mode: hypothetical commands show w show c show appropriate parts General Public License. course, program’s commands might different; GUI interface, use “box”. also get employer (work programmer) school, , sign “copyright disclaimer” program, necessary. information , apply follow GNU GPL, see <http://www.gnu.org/licenses/>. GNU General Public License permit incorporating program proprietary programs. program subroutine library, may consider useful permit linking proprietary applications library. want , use GNU Lesser General Public License instead License. first, please read <http://www.gnu.org/philosophy/--lgpl.html>.","code":"<one line to give the program's name and a brief idea of what it does.> Copyright (C) <year>  <name of author>  This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>. <program>  Copyright (C) <year>  <name of author> This program comes with ABSOLUTELY NO WARRANTY; for details type 'show w'. This is free software, and you are welcome to redistribute it under certain conditions; type 'show c' for details."},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Basic Usage","text":"fiphde (forecasting influenza support public health decision making) package provides utilities forecasting influenza hospitalizations United States. fiphde includes functions retrieving hospitalization time series data HHS Protect system HealthData.gov, preparing raw data forecasting, fitting time series count regression models create probabilistic forecasts influenza hospitalizations state national levels, visualizing evaluating forecasts, formatting forecasts submission FluSight. fiphde rhymes “fifty,” 50 states US.","code":""},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"usage","dir":"Articles","previous_headings":"","what":"Usage","title":"Basic Usage","text":"fiphde package retrieves current data HHS CDC APIs fits models forecasts using data. vignette uses data current May 28, 2022 (MMWR epidemiological week 21 2022). Running code written produce different results depending run code, new data constantly added historical data constantly revised. get started, load packages used vignette.","code":"library(fiphde) library(dplyr) library(purrr) library(readr) library(ggplot2) theme_set(theme_bw())"},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"data-retrieval","dir":"Articles","previous_headings":"Usage","what":"Data retrieval","title":"Basic Usage","text":"Prior fitting forecasts need first retrieve data HealthData.gov COVID-19 Reported Patient Impact Hospital Capacity State Timeseries API. Running get_hdgov_hosp(limitcols=TRUE) initiate API call argument return selection fields relevant flu hospitalization reporting.","code":"hosp <- get_hdgov_hosp(limitcols = TRUE) hosp #> # A tibble: 43,967 × 14 #>    state date       flu.admits flu.admits.cov flu.deaths flu.deaths.cov flu.icu #>    <chr> <date>          <dbl>          <dbl>      <dbl>          <dbl>   <dbl> #>  1 AL    2019-12-31         NA              0         NA              0      NA #>  2 HI    2019-12-31         NA              0         NA              0      NA #>  3 IN    2019-12-31         NA              0         NA              0      NA #>  4 LA    2019-12-31         NA              0         NA              0      NA #>  5 MN    2019-12-31         NA              0         NA              0      NA #>  6 MT    2019-12-31         NA              0         NA              0      NA #>  7 NC    2019-12-31         NA              0         NA              0      NA #>  8 PR    2019-12-31         NA              0         NA              0      NA #>  9 TX    2019-12-31         NA              0         NA              0      NA #> 10 AL    2020-01-01         NA              0         NA              0      NA #> # ℹ 43,957 more rows #> # ℹ 7 more variables: flu.icu.cov <dbl>, flu.tot <dbl>, flu.tot.cov <dbl>, #> #   cov.admits <dbl>, cov.admits.cov <dbl>, cov.deaths <dbl>, #> #   cov.deaths.cov <dbl>"},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"time-series-forecasting","dir":"Articles","previous_headings":"Usage","what":"Time series forecasting","title":"Basic Usage","text":"first fit time series model, creating ensemble model ARIMA exponential smoothing models. Time series modeling based tidyverts (https://tidyverts.org/) collection packages tidy time series forecasting R.","code":""},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"data-preparation","dir":"Articles","previous_headings":"Usage > Time series forecasting","what":"Data preparation","title":"Basic Usage","text":"need initially prepare data time series forecast. prep_hdgov_hosp function call limit states (territories), remove data incomplete epidemiological week (Sunday-Saturday), remove locations little reported hospitalizations last month, exclude Washington DC downstream analysis. function aggregates total number cases epidemiological week location. function also adds location FIPS codes, joins historical influenza-like illness (ILI) hospitalization mean values ranks week. Historical indicators ILI hospitalizations summarized CDC ILINet CDC FluSurv-Net respectively. Now let’s explore data.  states highest admissions 2021-2022 flu season? Top 10 states highest flu hospitalizations 2021-2022. Next let’s turn tsibble. tsibble objects tibbles index variable describing inherent ordering past present, key defines observational units time. make_tsibble function provides convenience wrapper around tsibble::as_tsibble using epidemiological week’s Monday weekly index location key. Note specification arguments epidemiological week / year location key passed “bare” (unquoted) names columns storing information original tibble.","code":"# Prep data prepped_hosp <-   hosp %>%   prep_hdgov_hosp(statesonly=TRUE, min_per_week = 0, remove_incomplete = TRUE) %>%   dplyr::filter(abbreviation != \"DC\") prepped_hosp #> # A tibble: 4,284 × 13 #>    abbreviation location week_start monday     week_end   epiyear epiweek #>    <chr>        <chr>    <date>     <date>     <date>       <dbl>   <dbl> #>  1 US           US       2020-10-18 2020-10-19 2020-10-24    2020      43 #>  2 US           US       2020-10-25 2020-10-26 2020-10-31    2020      44 #>  3 US           US       2020-11-01 2020-11-02 2020-11-07    2020      45 #>  4 US           US       2020-11-08 2020-11-09 2020-11-14    2020      46 #>  5 US           US       2020-11-15 2020-11-16 2020-11-21    2020      47 #>  6 US           US       2020-11-22 2020-11-23 2020-11-28    2020      48 #>  7 US           US       2020-11-29 2020-11-30 2020-12-05    2020      49 #>  8 US           US       2020-12-06 2020-12-07 2020-12-12    2020      50 #>  9 US           US       2020-12-13 2020-12-14 2020-12-19    2020      51 #> 10 US           US       2020-12-20 2020-12-21 2020-12-26    2020      52 #> # ℹ 4,274 more rows #> # ℹ 6 more variables: flu.admits <dbl>, flu.admits.cov <dbl>, ili_mean <dbl>, #> #   ili_rank <int>, hosp_mean <dbl>, hosp_rank <int> prepped_hosp %>%    filter(abbreviation %in% c(\"US\", \"CA\", \"TX\", \"NY\")) %>%    ggplot(aes(week_end, flu.admits)) + geom_line() +    facet_wrap(~abbreviation, scale=\"free_y\") prepped_hosp %>%    filter(abbreviation!=\"US\") %>%    filter(week_start>=\"2021-07-01\" & week_end<\"2022-06-30\") %>%    group_by(abbreviation) %>%    summarize(total.flu.admits=sum(flu.admits)) %>%    arrange(desc(total.flu.admits)) %>%    head(10) %>%    knitr::kable(caption=\"Top 10 states with highest flu hospitalizations in 2021-2022.\") prepped_hosp_tsibble <- make_tsibble(prepped_hosp,                                      epiyear=epiyear,                                      epiweek=epiweek,                                      key=location) prepped_hosp_tsibble #> # A tsibble: 4,284 x 14 [1W] #> # Key:       location [51] #>    abbreviation location week_start monday        yweek week_end   epiyear #>    <chr>        <chr>    <date>     <date>       <week> <date>       <dbl> #>  1 AL           01       2020-10-18 2020-10-19 2020 W43 2020-10-24    2020 #>  2 AL           01       2020-10-25 2020-10-26 2020 W44 2020-10-31    2020 #>  3 AL           01       2020-11-01 2020-11-02 2020 W45 2020-11-07    2020 #>  4 AL           01       2020-11-08 2020-11-09 2020 W46 2020-11-14    2020 #>  5 AL           01       2020-11-15 2020-11-16 2020 W47 2020-11-21    2020 #>  6 AL           01       2020-11-22 2020-11-23 2020 W48 2020-11-28    2020 #>  7 AL           01       2020-11-29 2020-11-30 2020 W49 2020-12-05    2020 #>  8 AL           01       2020-12-06 2020-12-07 2020 W50 2020-12-12    2020 #>  9 AL           01       2020-12-13 2020-12-14 2020 W51 2020-12-19    2020 #> 10 AL           01       2020-12-20 2020-12-21 2020 W52 2020-12-26    2020 #> # ℹ 4,274 more rows #> # ℹ 7 more variables: epiweek <dbl>, flu.admits <dbl>, flu.admits.cov <dbl>, #> #   ili_mean <dbl>, ili_rank <int>, hosp_mean <dbl>, hosp_rank <int>"},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"fit-a-model-and-forecast","dir":"Articles","previous_headings":"Usage > Time series forecasting","what":"Fit a model and forecast","title":"Basic Usage","text":"Next, let’s fit time series model create forecasts using ts_fit_forecast function. function takes tsibble created , forecast horizon weeks, name outcome variable forecast, optional covariates use ARIMA model. fit non-seasonal ARIMA model autoregressive term (p) restricted 1:2, order integration differencing (d) restricted 0:2, moving average (q) restricted 0 (see ?fable::ARIMA information). model also fits non-seasonal exponential smoothing model (see ?fable::ETS details). example fit autoregressive neural network model, change nnetar=NULL nnetar=\"AR(P=1)\" (see ?fable::nnetar details). can also trim data used modeling, restrict include hospitalization data reported January 1, 2021. setting ensemble=TRUE create ensemble model averages ARIMA exponential smoothing models. function output messages describing ARIMA ETS model formulas passed fable::ARIMA fable::ETS. fitting models, function forecasts outcome specified number weeks. Let’s take look object returned model fit + forecast. see $tsfit, gives us ARIMA, ETS, ensemble model fits list columns, one row per location; $tsfor gives us forecast next four weeks, one row per model per location (key tsibble); $formulas gives us model formulas passed fable modeling functions; models failed converge see locations $nullmodels. Next, can format forecasts submission FluSight using format_for_submission function. list contains separate submission-ready tibbles, one element type model fitted. can check see submission valid. Note fail expected date target dates current dates don’t line . ’ll see message noting “submission target end dates line expected Saturdays horizon. Note submission forecast date Sunday Monday, forecasts assumed start following week.” validation succeeds, $valid element returned list TRUE, FALSE validation checks fail. Let’s plot forecast observed data using plot_forecast function. plot forecasts 50% prediction interval US, New York (FIPS 36) Florida (FIPS 12).    Finally, can pull ARIMA model parameters used location save posterity retrospective analysis.","code":"hosp_fitfor <- ts_fit_forecast(prepped_hosp_tsibble,                                horizon=4L,                                outcome=\"flu.admits\",                                trim_date = \"2021-01-01\",                                covariates=TRUE,                                 models=list(arima='PDQ(0, 0, 0) + pdq(1:2, 0:2, 0)',                                            ets='season(method=\"N\")',                                            nnetar=NULL),                                 ensemble=TRUE) Trimming to 2021-01-01 ARIMA  formula: flu.admits ~ PDQ(0, 0, 0) + pdq(1:2, 0:2, 0) + hosp_rank + ili_rank ETS    formula: flu.admits ~ season(method = \"N\") hosp_fitfor #> $tsfit #> # A mable: 51 x 4 #> # Key:     location [51] #>    location                       arima          ets      ensemble #>    <chr>                        <model>      <model>       <model> #>  1 01       <LM w/ ARIMA(2,0,0) errors> <ETS(A,N,N)> <COMBINATION> #>  2 02       <LM w/ ARIMA(1,0,0) errors> <ETS(A,N,N)> <COMBINATION> #>  3 04       <LM w/ ARIMA(2,1,0) errors> <ETS(M,N,N)> <COMBINATION> #>  4 05       <LM w/ ARIMA(2,1,0) errors> <ETS(A,N,N)> <COMBINATION> #>  5 06       <LM w/ ARIMA(2,2,0) errors> <ETS(M,A,N)> <COMBINATION> #>  6 08       <LM w/ ARIMA(1,1,0) errors> <ETS(A,N,N)> <COMBINATION> #>  7 09       <LM w/ ARIMA(1,1,0) errors> <ETS(A,N,N)> <COMBINATION> #>  8 10       <LM w/ ARIMA(2,1,0) errors> <ETS(A,N,N)> <COMBINATION> #>  9 12       <LM w/ ARIMA(2,2,0) errors> <ETS(M,N,N)> <COMBINATION> #> 10 13       <LM w/ ARIMA(2,1,0) errors> <ETS(A,N,N)> <COMBINATION> #> # ℹ 41 more rows #>  #> $tsfor #> # A fable: 612 x 10 [1W] #> # Key:     location, .model [153] #>    location .model      yweek #>    <chr>    <chr>      <week> #>  1 01       arima    2022 W22 #>  2 01       arima    2022 W23 #>  3 01       arima    2022 W24 #>  4 01       arima    2022 W25 #>  5 01       ets      2022 W22 #>  6 01       ets      2022 W23 #>  7 01       ets      2022 W24 #>  8 01       ets      2022 W25 #>  9 01       ensemble 2022 W22 #> 10 01       ensemble 2022 W23 #> # ℹ 602 more rows #> # ℹ 7 more variables: flu.admits <dist>, .mean <dbl>, epiweek <dbl>, #> #   ili_mean <dbl>, ili_rank <int>, hosp_mean <dbl>, hosp_rank <int> #>  #> $formulas #> $formulas$arima #> flu.admits ~ PDQ(0, 0, 0) + pdq(1:2, 0:2, 0) + hosp_rank + ili_rank #> <environment: 0x55a42bc233e0> #>  #> $formulas$ets #> flu.admits ~ season(method = \"N\") #> <environment: 0x55a42bc233e0> #>  #>  #> $nullmodels #> # A tibble: 0 × 2 #> # ℹ 2 variables: location <chr>, model <chr> formatted_list <- format_for_submission(hosp_fitfor$tsfor, method = \"ts\", format = \"legacy\") formatted_list #> $arima #> # A tibble: 4,896 × 7 #>    forecast_date target            target_end_date location type  quantile value #>    <date>        <chr>             <date>          <chr>    <chr> <chr>    <chr> #>  1 2024-12-10    1 wk ahead inc f… 2022-06-04      01       point NA       17    #>  2 2024-12-10    2 wk ahead inc f… 2022-06-11      01       point NA       21    #>  3 2024-12-10    3 wk ahead inc f… 2022-06-18      01       point NA       20    #>  4 2024-12-10    4 wk ahead inc f… 2022-06-25      01       point NA       22    #>  5 2024-12-10    1 wk ahead inc f… 2022-06-04      01       quan… 0.010    0     #>  6 2024-12-10    2 wk ahead inc f… 2022-06-11      01       quan… 0.010    4     #>  7 2024-12-10    3 wk ahead inc f… 2022-06-18      01       quan… 0.010    1     #>  8 2024-12-10    4 wk ahead inc f… 2022-06-25      01       quan… 0.010    3     #>  9 2024-12-10    1 wk ahead inc f… 2022-06-04      01       quan… 0.025    2     #> 10 2024-12-10    2 wk ahead inc f… 2022-06-11      01       quan… 0.025    6     #> # ℹ 4,886 more rows #>  #> $ensemble #> # A tibble: 4,896 × 7 #>    forecast_date target            target_end_date location type  quantile value #>    <date>        <chr>             <date>          <chr>    <chr> <chr>    <chr> #>  1 2024-12-10    1 wk ahead inc f… 2022-06-04      01       point NA       18    #>  2 2024-12-10    2 wk ahead inc f… 2022-06-11      01       point NA       20    #>  3 2024-12-10    3 wk ahead inc f… 2022-06-18      01       point NA       19    #>  4 2024-12-10    4 wk ahead inc f… 2022-06-25      01       point NA       20    #>  5 2024-12-10    1 wk ahead inc f… 2022-06-04      01       quan… 0.010    0     #>  6 2024-12-10    2 wk ahead inc f… 2022-06-11      01       quan… 0.010    1     #>  7 2024-12-10    3 wk ahead inc f… 2022-06-18      01       quan… 0.010    0     #>  8 2024-12-10    4 wk ahead inc f… 2022-06-25      01       quan… 0.010    0     #>  9 2024-12-10    1 wk ahead inc f… 2022-06-04      01       quan… 0.025    3     #> 10 2024-12-10    2 wk ahead inc f… 2022-06-11      01       quan… 0.025    4     #> # ℹ 4,886 more rows #>  #> $ets #> # A tibble: 4,896 × 7 #>    forecast_date target            target_end_date location type  quantile value #>    <date>        <chr>             <date>          <chr>    <chr> <chr>    <chr> #>  1 2024-12-10    1 wk ahead inc f… 2022-06-04      01       point NA       19    #>  2 2024-12-10    2 wk ahead inc f… 2022-06-11      01       point NA       19    #>  3 2024-12-10    3 wk ahead inc f… 2022-06-18      01       point NA       19    #>  4 2024-12-10    4 wk ahead inc f… 2022-06-25      01       point NA       19    #>  5 2024-12-10    1 wk ahead inc f… 2022-06-04      01       quan… 0.010    0     #>  6 2024-12-10    2 wk ahead inc f… 2022-06-11      01       quan… 0.010    0     #>  7 2024-12-10    3 wk ahead inc f… 2022-06-18      01       quan… 0.010    0     #>  8 2024-12-10    4 wk ahead inc f… 2022-06-25      01       quan… 0.010    0     #>  9 2024-12-10    1 wk ahead inc f… 2022-06-04      01       quan… 0.025    2     #> 10 2024-12-10    2 wk ahead inc f… 2022-06-11      01       quan… 0.025    1     #> # ℹ 4,886 more rows validate_forecast(formatted_list$ensemble) plot_forecast(prepped_hosp, formatted_list$ensemble, loc=\"US\", pi = .5) plot_forecast(prepped_hosp, formatted_list$ensemble, loc=\"36\", pi = .5) plot_forecast(prepped_hosp, formatted_list$ensemble, loc=\"12\", pi = .5) hosp_fitfor$tsfit$arima %>%    map(\"fit\") %>%    map_df(\"spec\") %>%    mutate(location = hosp_fitfor$tsfit$location, .before = \"p\") #>    location p d q P D Q constant period #> 1        01 2 0 0 0 0 0     TRUE     52 #> 2        02 1 0 0 0 0 0     TRUE     52 #> 3        04 2 1 0 0 0 0    FALSE     52 #> 4        05 2 1 0 0 0 0    FALSE     52 #> 5        06 2 2 0 0 0 0    FALSE     52 #> 6        08 1 1 0 0 0 0    FALSE     52 #> 7        09 1 1 0 0 0 0    FALSE     52 #> 8        10 2 1 0 0 0 0    FALSE     52 #> 9        12 2 2 0 0 0 0    FALSE     52 #> 10       13 2 1 0 0 0 0    FALSE     52 #> 11       15 2 1 0 0 0 0    FALSE     52 #> 12       16 1 1 0 0 0 0    FALSE     52 #> 13       17 1 1 0 0 0 0    FALSE     52 #> 14       18 1 1 0 0 0 0    FALSE     52 #> 15       19 2 1 0 0 0 0    FALSE     52 #> 16       20 1 1 0 0 0 0    FALSE     52 #> 17       21 1 1 0 0 0 0    FALSE     52 #> 18       22 1 1 0 0 0 0    FALSE     52 #> 19       23 2 1 0 0 0 0     TRUE     52 #> 20       24 2 1 0 0 0 0    FALSE     52 #> 21       25 1 1 0 0 0 0    FALSE     52 #> 22       26 1 1 0 0 0 0    FALSE     52 #> 23       27 1 1 0 0 0 0    FALSE     52 #> 24       28 2 1 0 0 0 0    FALSE     52 #> 25       29 2 1 0 0 0 0    FALSE     52 #> 26       30 2 1 0 0 0 0    FALSE     52 #> 27       31 1 1 0 0 0 0    FALSE     52 #> 28       32 1 1 0 0 0 0    FALSE     52 #> 29       33 1 1 0 0 0 0    FALSE     52 #> 30       34 1 1 0 0 0 0    FALSE     52 #> 31       35 1 1 0 0 0 0    FALSE     52 #> 32       36 2 1 0 0 0 0    FALSE     52 #> 33       37 2 1 0 0 0 0    FALSE     52 #> 34       38 1 1 0 0 0 0    FALSE     52 #> 35       39 2 1 0 0 0 0    FALSE     52 #> 36       40 1 1 0 0 0 0    FALSE     52 #> 37       41 1 1 0 0 0 0    FALSE     52 #> 38       42 1 1 0 0 0 0    FALSE     52 #> 39       44 2 1 0 0 0 0    FALSE     52 #> 40       45 2 1 0 0 0 0    FALSE     52 #> 41       46 2 1 0 0 0 0    FALSE     52 #> 42       47 2 1 0 0 0 0    FALSE     52 #> 43       48 1 1 0 0 0 0    FALSE     52 #> 44       49 1 1 0 0 0 0    FALSE     52 #> 45       50 2 1 0 0 0 0    FALSE     52 #> 46       51 1 1 0 0 0 0    FALSE     52 #> 47       53 2 2 0 0 0 0    FALSE     52 #> 48       54 1 1 0 0 0 0    FALSE     52 #> 49       55 1 1 0 0 0 0    FALSE     52 #> 50       56 2 1 0 0 0 0    FALSE     52 #> 51       US 2 1 0 0 0 0    FALSE     52"},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"count-regression-forecasting","dir":"Articles","previous_headings":"Usage","what":"Count regression forecasting","title":"Basic Usage","text":"time series methods assume outcome continuous distribution. forecasting counts especially small counts (e.g., “many influenza hospitalizations occur next week Hawaii?”) alternative methods may desirable properties. fiphde provides functionality leverage count regression models forecasting influenza hospitalizations. demonstrate implement count regression modeling approach. example step process forecasting hospitalizations Hawaii using influenza-like illness (ILI) indicators historical hospitalization ILI severity given epidemiological weeks. usage illustrates automated tuning procedure finds “best” models possible covariates model families (e.g., Poisson, Quasipoisson, Negative binomial, etc.).","code":""},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"ili-retrieval-and-prep","dir":"Articles","previous_headings":"Usage > Count regression forecasting","what":"ILI retrieval and prep","title":"Basic Usage","text":"Given ILI covariate count regression model, must first retrieve ILI data using get_cdc_ili() function, wrapper around ilinet(). , ’re using recent ILI data (.e., since 2019) filter signal include Hawaii. ILI subject revision may less reliable initially reported, replace current week one week previous Nowcast data. Finally, fit time series model forecast ILI next four weeks. next step going log transform weighted ILI flu admissions, step need remove zeros. fiphde package provides mnz_replace function replaces zeros variable smallest non-zero value variable. Finally, create modeling dataset combining flu admission data prepared forecasted ILI data future weeks together historical severity data epidemiological week.","code":"ilidat <-    get_cdc_ili(region=c(\"state\"), years=2019:2022) %>%   filter(region == \"Hawaii\") %>%   replace_ili_nowcast(., weeks_to_replace=1)  ilifor <- forecast_ili(ilidat, horizon=4L, trim_date=\"2020-03-01\") ilidat <- ilidat %>% mutate(weighted_ili=mnz_replace(weighted_ili))  ilifor$ilidat <- ilifor$ilidat %>% mutate(ili=mnz_replace(ili)) ilifor$ili_future <- ilifor$ili_future %>% mutate(ili=mnz_replace(ili)) ilifor$ili_bound <- ilifor$ili_bound  %>% mutate(ili=mnz_replace(ili)) dat_hi <-   prepped_hosp %>%   filter(abbreviation==\"HI\") %>%   dplyr::mutate(date = MMWRweek::MMWRweek2Date(epiyear, epiweek)) %>%   left_join(ilifor$ilidat, by = c(\"epiyear\", \"location\", \"epiweek\")) %>%   mutate(ili = log(ili)) dat_hi #> # A tibble: 84 × 15 #>    abbreviation location week_start monday     week_end   epiyear epiweek #>    <chr>        <chr>    <date>     <date>     <date>       <dbl>   <dbl> #>  1 HI           15       2020-10-18 2020-10-19 2020-10-24    2020      43 #>  2 HI           15       2020-10-25 2020-10-26 2020-10-31    2020      44 #>  3 HI           15       2020-11-01 2020-11-02 2020-11-07    2020      45 #>  4 HI           15       2020-11-08 2020-11-09 2020-11-14    2020      46 #>  5 HI           15       2020-11-15 2020-11-16 2020-11-21    2020      47 #>  6 HI           15       2020-11-22 2020-11-23 2020-11-28    2020      48 #>  7 HI           15       2020-11-29 2020-11-30 2020-12-05    2020      49 #>  8 HI           15       2020-12-06 2020-12-07 2020-12-12    2020      50 #>  9 HI           15       2020-12-13 2020-12-14 2020-12-19    2020      51 #> 10 HI           15       2020-12-20 2020-12-21 2020-12-26    2020      52 #> # ℹ 74 more rows #> # ℹ 8 more variables: flu.admits <dbl>, flu.admits.cov <dbl>, ili_mean <dbl>, #> #   ili_rank <int>, hosp_mean <dbl>, hosp_rank <int>, date <date>, ili <dbl>"},{"path":"https://signaturescience.github.io/fiphde/articles/basic_usage.html","id":"fit-a-model-and-forecast-1","dir":"Articles","previous_headings":"Usage > Count regression forecasting","what":"Fit a model and forecast","title":"Basic Usage","text":"First create list different count regression models fit. can inspect formulations model. Note models specified using trending package internally trendeval package used determine best fitting approach. must next project covariates four weeks future, can accomplish pulling forecasted ILI historical severity data. Next use fiphde’s glm_wrap function attempts find best-fitting model models supplied, specifies prediction interval quantiles used FluSight. can take quick look forecast output well different aspects final fitted model. Next prepare data quantile format used FluSight. Finally, can visualize forecasted point estimates 90% prediction interval alongside observed data.","code":"models <-   list(     poisson = trending::glm_model(flu.admits ~ ili + hosp_rank + ili_rank, family = \"poisson\"),     quasipoisson = trending::glm_model(flu.admits ~ ili + hosp_rank + ili_rank, family = \"quasipoisson\"),     negbin = trending::glm_nb_model(flu.admits ~ ili + hosp_rank + ili_rank)   ) models$poisson #> Untrained trending model: #>     glm(formula = flu.admits ~ ili + hosp_rank + ili_rank, family = \"poisson\") models$quasipoisson #> Untrained trending model: #>     glm(formula = flu.admits ~ ili + hosp_rank + ili_rank, family = \"quasipoisson\") models$negbin #> Untrained trending model: #>     glm.nb(formula = flu.admits ~ ili + hosp_rank + ili_rank) new_cov <-   ilifor$ili_future %>%   left_join(fiphde:::historical_severity, by=\"epiweek\") %>%   select(-epiweek,-epiyear) %>%   mutate(ili = log(ili)) new_cov #> # A tibble: 4 × 6 #>   location   ili ili_mean ili_rank hosp_mean hosp_rank #>   <chr>    <dbl>    <dbl>    <int>     <dbl>     <int> #> 1 15       0.655    1.02        12         0         0 #> 2 15       0.634    0.985       10         0         0 #> 3 15       0.642    0.946        9         0         0 #> 4 15       0.644    0.920        8         0         0 res <- glm_wrap(dat_hi,                 new_covariates = new_cov,                 .models = models,                 alpha = c(0.01, 0.025, seq(0.05, 0.5, by = 0.05)) * 2) res$forecasts$location <- \"15\" head(res$forecasts) #> # A tibble: 6 × 5 #>   epiweek epiyear quantile value location #>     <dbl>   <dbl>    <dbl> <dbl> <chr>    #> 1      22    2022    0.01      0 15       #> 2      22    2022    0.025     0 15       #> 3      22    2022    0.05      0 15       #> 4      22    2022    0.1       0 15       #> 5      22    2022    0.15      1 15       #> 6      22    2022    0.2       1 15 res$model #> <trending_fit_tbl> 1 x 3 #>   result warnings errors #>   <list> <list>   <list> #> 1 <glm>  <NULL>   <NULL> res$model$fit #> NULL res$model$fit$fitted_model$family #> NULL res$model$fit$fitted_model$coefficients #> NULL hi_glm_prepped <- format_for_submission(res$forecasts, method=\"CREG\", format = \"legacy\") hi_glm_prepped #> $CREG #> # A tibble: 96 × 7 #>    forecast_date target            target_end_date location type  quantile value #>    <date>        <chr>             <date>          <chr>    <chr> <chr>    <chr> #>  1 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.010    0     #>  2 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.025    0     #>  3 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.050    0     #>  4 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.100    0     #>  5 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.150    1     #>  6 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.200    1     #>  7 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.250    1     #>  8 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.300    1     #>  9 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.350    2     #> 10 2024-12-27    1 wk ahead inc f… 2022-06-04      15       quan… 0.400    2     #> # ℹ 86 more rows plot_forecast(dat_hi, hi_glm_prepped$CREG, location=\"15\", pi=.9)"},{"path":"https://signaturescience.github.io/fiphde/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"VP Nagraj. Author, maintainer. Desiree Williams. Author. Shakeel Jessa. Author. Chris Hulme-Lowe. Author. Stephen Turner. Author.","code":""},{"path":"https://signaturescience.github.io/fiphde/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Nagraj V, Williams D, Jessa S, Hulme-Lowe C, Turner S (2024). fiphde: Forecasting Influenza Support Public Health Decision Making. R package version 2.1.0, https://github.com/signaturescience/fiphde, https://signaturescience.github.io/fiphde/.","code":"@Manual{,   title = {fiphde: Forecasting Influenza in Support of Public Health Decision Making},   author = {VP Nagraj and Desiree Williams and Shakeel Jessa and Chris Hulme-Lowe and Stephen Turner},   year = {2024},   note = {R package version 2.1.0, https://github.com/signaturescience/fiphde},   url = {https://signaturescience.github.io/fiphde/}, }"},{"path":"https://signaturescience.github.io/fiphde/index.html","id":"fiphde","dir":"","previous_headings":"","what":"Forecasting Influenza in Support of Public Health Decision Making","title":"Forecasting Influenza in Support of Public Health Decision Making","text":"fiphde: Forecasting Influenza Support Public Health DEcision Making","code":""},{"path":"https://signaturescience.github.io/fiphde/index.html","id":"motivation","dir":"","previous_headings":"","what":"Motivation","title":"Forecasting Influenza in Support of Public Health Decision Making","text":"fiphde originally created operationally forecast influenza hospitalizations 2021-22 2022-23 seasons FluSight challenge. package includes functions data retrieval, modeling, near-term forecasting, forecast summarization. Functionality fiphde implemented infectious disease forecasting, including 2022-23 DoD COVID-like illness forecasting challenge.","code":""},{"path":"https://signaturescience.github.io/fiphde/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Forecasting Influenza in Support of Public Health Decision Making","text":"install fiphde GitHub:","code":"# install.packages(\"remotes\") remotes::install_github(\"signaturescience/fiphde\", build_vignettes = TRUE)"},{"path":"https://signaturescience.github.io/fiphde/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Forecasting Influenza in Support of Public Health Decision Making","text":"get started, see package vignette:","code":"vignette(\"basic_usage\", package=\"fiphde\")"},{"path":"https://signaturescience.github.io/fiphde/reference/clin_nowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Nowcast clinical laboratory percent positive flu data — clin_nowcast","title":"Nowcast clinical laboratory percent positive flu data — clin_nowcast","text":"function provides naive nowcasting method clinical laboratory percent positive flu data. methodology simply averages last 4 weeks available data uses average value number weeks specified replace. function always add 1 additional week observed data (optionally) replace number weeks specified \"weeks_to_replace\" argument. useful given reporting lag NREVSS clinical laboratory percent positive flu data.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/clin_nowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Nowcast clinical laboratory percent positive flu data — clin_nowcast","text":"","code":"clin_nowcast(clin, weeks_to_replace = 1)"},{"path":"https://signaturescience.github.io/fiphde/reference/clin_nowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Nowcast clinical laboratory percent positive flu data — clin_nowcast","text":"clin Data prepared get_cdc_clin weeks_to_replace Number retrospective weeks replace nowcast; default 1","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/clin_nowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Nowcast clinical laboratory percent positive flu data — clin_nowcast","text":"tibble following columns: abbreviation: Abbreviation location location: FIPS code location epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) week_start: Date beginning (Sunday) given epidemiological week p_positive: Percentage positive specimens n_positive: Total number positive specimens total: Total number specimens tested","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/clin_nowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Nowcast clinical laboratory percent positive flu data — clin_nowcast","text":"","code":"if (FALSE) { # \\dontrun{  # Get data for Texas tx_clin <-   get_cdc_clin(region = \"state\") %>%   dplyr::filter(location == \"48\")  # Look at most recent observations tx_clin %>%   dplyr::arrange(week_start) %>%   tail()  # Now augment with default 1 week nowcast tx_clin %>%   clin_nowcast(., weeks_to_replace = 1) %>%   dplyr::arrange(week_start) %>%   tail()  # And again augmented with 2 week nowcast instead tx_clin %>%   clin_nowcast(., weeks_to_replace = 2) %>%   dplyr::arrange(week_start) %>%   tail()  } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/density_probs.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate categorical probability density — density_probs","title":"Calculate categorical probability density — density_probs","text":"unexported helper function used build distribution quantile forecasts calculate probability density thresholds associated category forecasted: large increase, increase, stable, decrease, large decrease.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/density_probs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate categorical probability density — density_probs","text":"","code":"density_probs(df, n_horizons = 5, ...)"},{"path":"https://signaturescience.github.io/fiphde/reference/density_probs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate categorical probability density — density_probs","text":"df Data frame forecasts categorical thresholds joined n_horizons Number horizons ahead ... Additional arguments passed distfromq::distfromq()","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/density_probs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate categorical probability density — density_probs","text":"Data frame probabilities rate change category","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/dot-mcga.html","id":null,"dir":"Reference","previous_headings":"","what":"Make clean column names — .mcga","title":"Make clean column names — .mcga","text":"helper used ilinet who_nrevss functions clean column names values returned APIs.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/dot-mcga.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make clean column names — .mcga","text":"","code":".mcga(tbl)"},{"path":"https://signaturescience.github.io/fiphde/reference/dot-mcga.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make clean column names — .mcga","text":"tbl Input tibble columns rename","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/dot-mcga.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make clean column names — .mcga","text":"tibble clean column names","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde-package.html","id":null,"dir":"Reference","previous_headings":"","what":"fiphde: Forecasting Influenza in Support of Public Health Decision Making — fiphde-package","title":"fiphde: Forecasting Influenza in Support of Public Health Decision Making — fiphde-package","text":"Miscellaneous functions retrieving data, creating evaluating time series forecasting models influenza-like illness (ILI) influenza hospitalizations United States.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"fiphde: Forecasting Influenza in Support of Public Health Decision Making — fiphde-package","text":"Maintainer: VP Nagraj pnagraj@signaturescience.com (ORCID) Authors: Desiree Williams Shakeel Jessa Chris Hulme-Lowe Stephen Turner (ORCID)","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde_launcher.html","id":null,"dir":"Reference","previous_headings":"","what":"FIPHDE explorer app launcher — fiphde_launcher","title":"FIPHDE explorer app launcher — fiphde_launcher","text":"explorer app allows user view plots forecasts, inspect tabular output submission files, download subsets forecast submission data. app includes interface interactively select locations include plots, table, download. function wraps shiny::runApp accepts arguments observed data forecasts plotted, well directory containing submission files, temporarily attached global environment use app session. Additional arguments passed ... inherited shiny::runApp. explorer meant review candidate submission files. , app written expect submission files \"submission_dir\" argument named \".candidate.csv\" suffix. examples submission files naming convention see system.file(\"extdata\", \"submission-example\", package = \"fiphde\"). Note submission files can included multiple models model-specific sub-directories.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde_launcher.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FIPHDE explorer app launcher — fiphde_launcher","text":"","code":"fiphde_launcher(.data, submission_dir, app_dir = NULL, ...)"},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde_launcher.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"FIPHDE explorer app launcher — fiphde_launcher","text":".data tibble historical data trend leading forecast submission_dir Full path directory submission files containing forecast submissions explore; submission files directory must named \".candidate.csv\" suffix app_dir Full path directory explorer app; default NULL app directory resolved system.file(\"app\", package=\"fiphde\") ... Additional arguments passed shiny::runApp","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde_launcher.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"FIPHDE explorer app launcher — fiphde_launcher","text":"function starts Shiny app. exit removes objects (see \".data\" \"submission_dir\") temporarily attached used app session.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/fiphde_launcher.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"FIPHDE explorer app launcher — fiphde_launcher","text":"","code":"if (FALSE) { # \\dontrun{ # Path to the submission example submission_dir <- system.file(\"extdata\", \"submission-example\", package = \"fiphde\") # Prepare data for explorer app prepped_hosp <-   get_hdgov_hosp(limitcols = TRUE) %>%   prep_hdgov_hosp(statesonly=TRUE, min_per_week = 0, remove_incomplete = TRUE) %>%   dplyr::filter(abbreviation != \"DC\") # Launch the explorer app fiphde_launcher(.data = prepped_hosp,                 submission_dir = submission_dir,                 host = \"0.0.0.0\",                 launch.browser = TRUE,                 port = 80) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_categorical.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecast categorical targets — forecast_categorical","title":"Forecast categorical targets — forecast_categorical","text":"function takes probabilistic flu hospitalization forecast input converts forecasted values location categorical \"change\" indicator. criteria level (\"large decrease\", \"decrease\", \"stable\", \"increase\", \"large increase\") defined CDC (see link references). algorithm evaluates absolute changes counts rates (per 100k individuals) recently observed week 2 week ahead forecasted horizon. procedure runs independently location, results formatted tabular output includes possible level corresponding probability observed (calculated probabilistic quantiles) every location.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_categorical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecast categorical targets — forecast_categorical","text":"","code":"forecast_categorical(   .forecast,   .observed,   method = \"density\",   format = \"hubverse\",   horizon = 4 )"},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_categorical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecast categorical targets — forecast_categorical","text":".forecast tibble \"submission-ready\" probabilistic flu hospitalization forecast data (.e., tibble contained list element returned format_for_submission) .observed tibble observed flu admission data (.e., tibble output prep_hdgov_hosp) method categorical forecasting method use; must one \"density\" \"interpolation\"; default \"density\" format submission format used; must one \"hubverse\" \"legacy\"; default \"hubverse\" horizon number horizons ahead forecast; must one 4 5; default 4","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_categorical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecast categorical targets — forecast_categorical","text":"tibble formatted categorical forecasts. format \"hubverse\" tibble following columns: reference_date: Date reference forecast submission horizon: Horizon given forecast target: Name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: Name geographic identifier (e.g., FIPS code) location given forecast output_type: Type forecasted value (e.g., \"quantile\") output_type_id: quantile forecasted value output_type \"quantile\" value: forecasted value format \"legacy\" tibble following columns: forecast_date: Date forecast target: Horizon name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: Name geographic identifier (e.g., FIPS code) location given forecast type: One either \"point\" \"quantile\" forecasted value quantile: quantile forecasted value; NA \"type\" \"point\" value: forecasted value","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_categorical.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Forecast categorical targets — forecast_categorical","text":"https://github.com/cdcepi/Flusight-forecast-data/blob/master/data-experimental/README.md","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_categorical.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Forecast categorical targets — forecast_categorical","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve hospitalization data h_raw <- get_hdgov_hosp(limitcols=TRUE) # Prepare and summarize hospitalization data to weekly resolution prepped_hosp <- prep_hdgov_hosp(h_raw) # Create a keyed time series tibble with only locations of interest prepped_tsibble <- make_tsibble(prepped_hosp,                                      epiyear = epiyear,                                      epiweek=epiweek,                                      key=location)  # Run with default constrained ARIMA, nonseasonal ETS, no NNETAR hosp_fitfor <- ts_fit_forecast(prepped_tsibble,                                horizon=4L,                                outcome=\"flu.admits\",                                covariates=TRUE) # Prepare forecast for quantile submission format forc <- format_for_submission(hosp_fitfor$tsfor, method = \"ts\", format = \"legacy\") # Run categorical summary of quantiles for the time series ensemble forecast_categorical(forc$ensemble, prepped_hosp, method = \"interpolation\", format = \"legacy\") } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_ili.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecast ILI — forecast_ili","title":"Forecast ILI — forecast_ili","text":"function forecasts ILI specified future horizon. models used can parameterized \"models\" argument (details see ts_fit_forecast). default, function use ARIMA approach model locations input historical ILI data use fitted models forecast horizons.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_ili.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecast ILI — forecast_ili","text":"","code":"forecast_ili(   ilidat,   horizon = 4L,   trim_date = NULL,   models = list(arima = \"PDQ(0,0,0)+pdq(1:2,0:2,0)\") )"},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_ili.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecast ILI — forecast_ili","text":"ilidat Data returned get_cdc_ili horizon Optional horizon periods forecasts generated; default 4 trim_date Earliest start date want use ILI data; default NULL trim models list model parameters passed ts_fit_forecast; defaults list(arima=\"PDQ(0,0,0)+pdq(1:2,0:2,0)\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_ili.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecast ILI — forecast_ili","text":"named list containing: ilidat: data sent function filtered location trim_date. Select columns returned. ilidat_tsibble: tsibble class object returned running make_tsibble data . ili_fit: fit fabletools::model. ili_forecast: forecast fabletools::forecast specified horizon. ili_future: horizon-number weeks ILI data forecasted future. ili_bound: data 1 bound data 5. arima_params: tibble ARIMA model parameters location (type=\"arima\"). locstats: tibble missing data information locations. removed: tibble locations removed high missing ILI data.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/forecast_ili.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Forecast ILI — forecast_ili","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve ILI data ilidat <- get_cdc_ili(region = c(\"national\", \"state\", \"hhs\"),                       years = 2010:lubridate::year(lubridate::today()))  # Using data only from march 2020 forward, for US only ilidat_us <- ilidat %>% dplyr::filter(location==\"US\") # Replace most recent week with nowcast data, and nowcast last week ilidat_us <- ilidat_us %>% replace_ili_nowcast(weeks_to_replace=1) ilifor_us <- forecast_ili(ilidat_us, horizon=4L, trim_date=\"2020-03-01\") # Take a look at objects that come out ILI forecasting procedure ilifor_us$ili_fit ilifor_us$arima_params ilifor_us$ili_forecast head(ilifor_us$ili_bound) tail(ilifor_us$ili_bound, 10) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/format_for_submission.html","id":null,"dir":"Reference","previous_headings":"","what":"Format forecasts for submission — format_for_submission","title":"Format forecasts for submission — format_for_submission","text":"function prepares forecasts adhere probabilistic forecast submission guidelines consortia FluSight.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/format_for_submission.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format forecasts for submission — format_for_submission","text":"","code":"format_for_submission(   .forecasts,   method = \"ts\",   .target = \"wk ahead inc flu hosp\",   format = \"hubverse\",   horizon_shift = 1 )"},{"path":"https://signaturescience.github.io/fiphde/reference/format_for_submission.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format forecasts for submission — format_for_submission","text":".forecasts Forecasts formatted submission; method \"ts\" forecasts ts_fit_forecast; otherwise must tibble forecast output (e.g., output glm_forecast) column designating \"location\" method Method forecasting; default \"ts\" trigger use ts_format_for_submission internally .target Name target forecast; default \"wk ahead inc flu hosp\" format submission format used; must one \"hubverse\" \"legacy\"; default \"hubverse\" horizon_shift Number horizons shift backwards align reference date; used format \"hubverse\"; default 1","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/format_for_submission.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format forecasts for submission — format_for_submission","text":"named list tibbles probabilistic forecasts (one model), formatted submission. format \"hubverse\" tibble following columns: reference_date: Date reference forecast submission horizon: Horizon given forecast target: Name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: Name geographic identifier (e.g., FIPS code) location given forecast output_type: Type forecasted value (e.g., \"quantile\") output_type_id: quantile forecasted value output_type \"quantile\" value: forecasted value format \"legacy\" tibble following columns: forecast_date: Date forecast target: Horizon name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: Name geographic identifier (e.g., FIPS code) location given forecast type: One either \"point\" \"quantile\" forecasted value quantile: quantile forecasted value; NA \"type\" \"point\" value: forecasted value","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/format_for_submission.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Format forecasts for submission — format_for_submission","text":"https://github.com/signaturescience/FluSight-forecast-hub/tree/main/model-output#forecast-file-format https://github.com/cdcepi/Flusight-forecast-data/blob/master/data-forecasts/README.md","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/format_for_submission.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format forecasts for submission — format_for_submission","text":"","code":"if (FALSE) { # \\dontrun{ # Get raw data from healthdata.gov h_raw <- get_hdgov_hosp(limitcols=TRUE)  # Prep, and make a tsibble prepped_hosp <- prep_hdgov_hosp(h_raw, statesonly=TRUE) prepped_hosp_tsibble <- make_tsibble(prepped_hosp,                                      epiyear = epiyear,                                      epiweek=epiweek,                                      key=location) # Limit to only Virginia and US prepped_hosp_tsibble <-   prepped_hosp_tsibble %>%   dplyr::filter(location %in% c(\"US\", \"51\"))  # Fit a model hosp_fitfor <- ts_fit_forecast(prepped_hosp_tsibble,                                horizon=4L,                                outcome=\"flu.admits\",                                covariates=TRUE)  # Format for submission formatted_list <- format_for_submission(hosp_fitfor$tsfor, method = \"ts\", format = \"legacy\") formatted_list } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_clin.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","title":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","text":"function returns weekly state /national clinical laboratory percent positivity data NREVSS reporting instrument via CDC FluView API.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_clin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","text":"","code":"get_cdc_clin(region = \"both\", years = NULL)"},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_clin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","text":"region Either \"state\", \"national\", \"\". Defaults \"\" return state national data combined. years vector years retrieve data . CDC data going back 1997. Default value (NULL) retrieves years.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_clin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","text":"tibble following columns: abbreviation: Abbreviation location location: FIPS code location epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) week_start: Date beginning (Sunday) given epidemiological week p_positive: Percentage positive specimens n_positive: Total number positive specimens total: Total number specimens tested","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_clin.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","text":"https://gis.cdc.gov/grasp/fluview/Phase_6_Cleared_Help.pdf","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_clin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve clinical laboratory percent positive flu data — get_cdc_clin","text":"","code":"if (FALSE) { # \\dontrun{ # Get all clinical lab flu positivity data all_clin <- get_cdc_clin() all_clin # Alternatively look at a specific location and time # This 2021 will return weekly data # Starting at beginning of 2021/22 season # Ending the week before start of 2022/23 season va_clin <-   get_cdc_clin(region = \"state\", years = 2021) %>%   dplyr::filter(location == \"51\") va_clin } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"function retrieves historical FluSurv-NET hospitalization data via either RESP-NET CDC FluView API (see 'Details' section).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"","code":"get_cdc_hosp(source = \"fluview\", years = NULL)"},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"source source hospitalization data; must one \"fluview\" \"resp-net\"; default \"fluview\" years vector years retrieve data (.e. 2014 CDC flu season 2014-2015). CDC data going back 2009 previous flu season. Default value (NULL) retrieves years. used source=\"fluview\".","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"tibble following columns: location: FIPS code location abbreviation: Abbreviation location region: Name region epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) week_start: Date beginning (Sunday) given epidemiological week week_end: Date end (Saturday) given epidemiological week rate: cumulative rate per 100k weekly_rate: weekly rate per 100k season: flu season given epidemiological week belongs","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"data retrieval FluView RESP-NET pulls FluSurv-NET lab-confirmed hospitalization data overall cumulative rates weekly incident rates across reporting sites, age groups, sex, race/ethnicity categories. Note October 2024, FluSurv-NET hospitalizations RESP-NET begin 2018-19 season, FluView data goes back 2009-10.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"Hospital Portal cdcfluview package RESP-NET Data Portal RESP-NET Dashboard","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_hosp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve hospitalization data from FluSurv-NET — get_cdc_hosp","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve FluSurv-Net hospitalization data for specific year(s) get_cdc_hosp() } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_ili.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve ILI data from ILINet — get_cdc_ili","title":"Retrieve ILI data from ILINet — get_cdc_ili","text":"function pulls ILINet data CDC FluView API. Data available historically can pulled state, national, HHS region level.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_ili.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve ILI data from ILINet — get_cdc_ili","text":"","code":"get_cdc_ili(region = c(\"national\", \"state\", \"hhs\"), years = NULL)"},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_ili.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve ILI data from ILINet — get_cdc_ili","text":"region Either \"state\", \"national\", \"hhs\"; defaults c(\"national\", \"state\", \"hhs\") three. years vector years retrieve data . CDC data going back 1997. Default value (NULL) retrieves years.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_ili.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve ILI data from ILINet — get_cdc_ili","text":"tibble following columns: location: FIPS code location region_type: type location abbreviation: Abbreviation location region: Name region epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) week_start: Date beginning (Sunday) given epidemiological week weighted_ili: Population-weighted percentage ILI outpatient visits unweighted_ili: Unweighted percentage ILI outpatient visits ilitotal: Total number ILI outpatient visits reported num_providers: Number providers reporting total_patients: Total number outpatient visits reported population: Total population given location","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_ili.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve ILI data from ILINet — get_cdc_ili","text":"https://gis.cdc.gov/grasp/fluview/FluViewPhase1QuickReferenceGuide.pdf","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_cdc_ili.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve ILI data from ILINet — get_cdc_ili","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve ILI data for specific years and regions get_cdc_ili(region=\"national\", years=2021) get_cdc_ili(region=\"hhs\", years=2021) get_cdc_ili(region=\"state\", years=2021) %>% dplyr::filter(abbreviation==\"VA\") get_cdc_ili(region=c(\"national\", \"state\"), years=2021) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve hospitalization data from HHS — get_hdgov_hosp","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"function retrieves hospital utilization time series data distributed healthdata.gov. Data aggregated state granularity facility level reports via HHS TeleTracking, HHS Protect, National Healthcare Safety Network (historically). Users can optionally filter include fields restrict prespecified set fields relevant COVID influenza hospital utilization. results returned tibble.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"","code":"get_hdgov_hosp(   endpoint = \"https://healthdata.gov/api/views/g62h-syeh/rows.csv\",   app_token = Sys.getenv(\"HEALTHDATA_APP_TOKEN\"),   limitcols = FALSE,   shift_back = TRUE )"},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"endpoint URL healthdata.gov endpoint app_token App token healthdata.gov; default look environment variable called \"HEALTHDATA_APP_TOKEN\" token supplied proceed possibility rate limitation (see \"Details\" information) limitcols Logical whether limit prespecified set columns (see \"Value\" section details); default FALSE shift_back Logical whether dates retrieved data shifted back reflect previous day; default TRUE","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"tibble least following columns: state: Abbreviation state date: Date report flu.admits: Count flu cases among admitted patients previous day flu.admits.cov: Coverage (number hospitals reporting) incident flu cases flu.deaths: Count flu deaths previous day flu.deaths.cov: Coverage (number hospitals reporting) flu deaths flu.icu: Count flu cases among ICU patients previous day flu.icu.cov: Coverage (number hospitals reporting) flu ICU cases flu.tot: Count total flu cases among admitted patients flu.tot.cov: Coverage (number hospitals reporting) total flu cases cov.admits: Count COVID cases among admitted patients previous day cov.admits.cov: Coverage (number hospitals reporting) incident COVID cases cov.deaths: Count COVID deaths previous day cov.deaths.cov: Coverage (number hospitals reporting) COVID deaths limitcols=TRUE columns returned listed . However, limitcols=FALSE function additionally return fields state-aggregated hospitalization data.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"data retrieval proceed whether API token supplied via app_token argument. However, avoid possible rate limits recommended retrieve token healthdata.gov API (https://healthdata.gov/profile/edit/developer_settings), add token entry .Renviron HEALTHDATA_APP_TOKEN=\"yourtokenhere\".","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"https://healthdata.gov/Hospital/COVID-19-Reported-Patient-Impact--Hospital-Capa/g62h-syeh https://dev.socrata.com/foundry/healthdata.gov/g62h-syeh","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_hdgov_hosp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve hospitalization data from HHS — get_hdgov_hosp","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve hospitalization data (all columns) get_hdgov_hosp() # Retrieve hospitalization data (limited columns) get_hdgov_hosp(limitcols=TRUE) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/get_nhsn_weekly.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve weekly NHSN flu hospitalization data — get_nhsn_weekly","title":"Retrieve weekly NHSN flu hospitalization data — get_nhsn_weekly","text":"function retrieves weekly aggregated NHSN hospital respiratory data API. function written use default API endpoint (see description \"endpoint\" argument link references). Note one available endpoints includes data flagged \"preliminary\". reported weekly aggregates include number facilities reporting. weeks April 28, 2024 November 02, 2024 NHSN flu hospitalization signal required reported.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nhsn_weekly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve weekly NHSN flu hospitalization data — get_nhsn_weekly","text":"","code":"get_nhsn_weekly(endpoint = \"https://data.cdc.gov/api/views/mpgq-jmmr/rows.csv\")"},{"path":"https://signaturescience.github.io/fiphde/reference/get_nhsn_weekly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve weekly NHSN flu hospitalization data — get_nhsn_weekly","text":"endpoint URL data.cdc.gov endpoint; default \"https://data.cdc.gov/api/views/mpgq-jmmr/rows.csv\" preliminary reporting signal","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nhsn_weekly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve weekly NHSN flu hospitalization data — get_nhsn_weekly","text":"tibble following columns: abbreviation: Abbreviation state US aggregate week_end: End date epiweek/epiyear reported flu.admits: Count incident flu cases among hospitalized patients flu.admits.cov: Coverage (number hospitals reporting) incident flu cases flu.admits.cov.perc: Coverage (percentage hospitals reporting) incident flu cases","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nhsn_weekly.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve weekly NHSN flu hospitalization data — get_nhsn_weekly","text":"https://data.cdc.gov/Public-Health-Surveillance/Weekly-Hospital-Respiratory-Data-HRD-Metrics--Ju/mpgq-jmmr/about_data https://data.cdc.gov/Public-Health-Surveillance/Weekly-Hospital-Respiratory-Data-HRD-Metrics--Ju/ua7e-t2fy/about_data","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve ILI nowcast — get_nowcast_ili","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"function pulls ILI nowcast CMU Delphi's ILI Nearby API. Observed ILINet data typically reported lag, ILI nowcast can used augment ILI data stream. functionality depends availability ILI Nearby API (see 'Details' section).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"","code":"get_nowcast_ili(   epiyearweeks = NULL,   dates = lubridate::today() - c(14, 7),   state = NULL,   boundatzero = TRUE )"},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"epiyearweeks vector epiyear-epiweeks retrieve data , e.g., 202150, 202151, etc. Exclusive dates dates vector dates retrieve data , e.g., \"\"2021-12-12\" \"2021-12-19\". Exclusive epiyearweek. Defaults two weeks prior. state vector states retrieve (two-letter abbreviation). Default NULL retrieves states, national, hhs regions. See examples. boundatzero Logical whether values truncated 0 (.e., non-negative); default TRUE","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"Either NA (API reached) tibble following columns: location: FIPS code location abbreviation: Abbreviation location epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) weighted_ili_now: Nowcasted ILI value","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"October 2022 ILInearby longer updated. , get_nowcast_ili() likely return 'NA'. See https://github.com/cmu-delphi/delphi-epidata/issues/993.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"https://delphi.cmu.edu/nowcast/","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_nowcast_ili.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve ILI nowcast — get_nowcast_ili","text":"","code":"if (FALSE) { # \\dontrun{ # Defaults to the previous two weeks for all states get_nowcast_ili()  # Otherwise specify one or the other, not both get_nowcast_ili(epiyearweeks=c(\"202150\", \"202151\"), dates=NULL) get_nowcast_ili(epiyearweeks=NULL, dates=c(\"2021-12-12\", \"2021-12-19\"))  # Get just one state for the last years worth of data (back 52 weeks to 1 week) get_nowcast_ili(epiyearweeks=NULL,                 dates=lubridate::today()-seq(52*7, 7, -7),                 state=\"FL\") } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/get_respnet.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve data from RESP-NET — get_respnet","title":"Retrieve data from RESP-NET — get_respnet","text":"unexported helper function retrieves data RESP-NET API respiratory hospitalizations. data retrieved can filtered specific network(s) reported. function used internally get_cdc_hosp.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_respnet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve data from RESP-NET — get_respnet","text":"","code":"get_respnet(network = \"FluSurv-NET\")"},{"path":"https://signaturescience.github.io/fiphde/reference/get_respnet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve data from RESP-NET — get_respnet","text":"network name RESP-NET network query; must one \"FluSurv-NET\", \"COVID-NET\", \"RSV-NET\", \"Combined\"; default \"FluSurv-NET\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/get_respnet.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve data from RESP-NET — get_respnet","text":"RESP-NET Data Portal RESP-NET Dashboard","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit glm models — glm_fit","title":"Fit glm models — glm_fit","text":"helper function used glm_wrap fit list models select best one. model selection procedure use root mean square error (RMSE) metric implemented yardstick::rmse select best model.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit glm models — glm_fit","text":"","code":"glm_fit(.data, .models, complete = TRUE)"},{"path":"https://signaturescience.github.io/fiphde/reference/glm_fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit glm models — glm_fit","text":".data Data including explanatory outcome variables needed modeling; must include column \"location\" .models List models defined trending::trending_model objects complete Logical whether observations covariates must available given model; default TRUE","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_fit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit glm models — glm_fit","text":"tibble containing characteristics \"best\" glm model including: model_class: \"type\" model best fit fit: fitted model object best fit stored list column location: geographic unit modeled data: Original model fit data tibble list column","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecast glm models — glm_forecast","title":"Forecast glm models — glm_forecast","text":"function uses fitted model object glm_fit future covariate data create probablistic forecasts specific quantiles derived \"alpha\" parameter.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecast glm models — glm_forecast","text":"","code":"glm_forecast(   .data,   new_covariates = NULL,   fit,   alpha = c(0.01, 0.025, seq(0.05, 0.45, by = 0.05)) * 2 )"},{"path":"https://signaturescience.github.io/fiphde/reference/glm_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecast glm models — glm_forecast","text":".data Data including explanatory outcome variables needed modeling new_covariates Tibble one column per covariate, n rows n horizons forecasted fit Fitted model object glm_fit; note must accessed first element \"fit\" column alpha Vector specifying threshold(s) used prediction intervals; alpha 0.05 correspond 95% PI; default c(0.01, 0.025, seq(0.05, 0.45, = 0.05)) * 2 create range intervals","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecast glm models — glm_forecast","text":"tibble forecasted data including following columns: epiweek: epidemiological week forecasted horizon epiyear: epidemiological year forecasted horizon quantile: quantile forecasted value; NA point estimate value: forecasted value","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_quibble.html","id":null,"dir":"Reference","previous_headings":"","what":"Get quantiles from prediction intervals — glm_quibble","title":"Get quantiles from prediction intervals — glm_quibble","text":"helper function runs trending::predict.trending_fit method fitted model specified values \"alpha\" order create range prediction intervals. processing also includes steps convert alpha corresponding quantile values upper lower bounds. See \"Details\" information translation \"alpha\" quantile values. function used internally glm_forecast.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_quibble.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get quantiles from prediction intervals — glm_quibble","text":"","code":"glm_quibble(   fit,   new_data,   alpha = c(0.01, 0.025, seq(0.05, 0.45, by = 0.05)) * 2 )"},{"path":"https://signaturescience.github.io/fiphde/reference/glm_quibble.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get quantiles from prediction intervals — glm_quibble","text":"fit Fitted model object glm_fit; note must accessed first element \"fit\" column new_data tibble new data trending::predict.trending_fit method run alpha Vector specifying threshold(s) used prediction intervals (PI); alpha 0.05 correspond 95% PI; default c(0.01, 0.025, seq(0.05, 0.45, = 0.05)) * 2 create range intervals","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_quibble.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get quantiles from prediction intervals — glm_quibble","text":"tibble forecasted data including following columns: epiweek: epidemiological week forecasted horizon epiyear: epidemiological year forecasted horizon quantile: quantile forecasted value; NA point estimate value: forecasted value","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_quibble.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get quantiles from prediction intervals — glm_quibble","text":"\"alpha\" parameter defines width prediction interval (PI). example, alpha = 0.05 correspond 95% PI. function uses PI(s) (per alpha value(s) specified) construct range quantiles fall lower upper bound PI. Continuing example alpha = 0.05, quantile estimates returned fall 0.025 (lower bound PI) 0.975 (upper bound PI).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_wrap.html","id":null,"dir":"Reference","previous_headings":"","what":"Run glm modeling and forecasting — glm_wrap","title":"Run glm modeling and forecasting — glm_wrap","text":"wrapper function pipelines influenza hospitalization modeling (glm_fit) forecasting (glm_forecast).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_wrap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run glm modeling and forecasting — glm_wrap","text":"","code":"glm_wrap(   .data,   .models,   new_covariates = NULL,   horizon = 4,   alpha = c(0.01, 0.025, seq(0.05, 0.45, by = 0.05)) * 2 )"},{"path":"https://signaturescience.github.io/fiphde/reference/glm_wrap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run glm modeling and forecasting — glm_wrap","text":".data Data including explanatory outcome variables needed modeling .models List models defined trending::trending_model objects new_covariates tibble one column per covariate, n rows n horizons forecasted horizon Number weeks ahead forecasting alpha Vector specifying threshold(s) used prediction intervals (PI); alpha 0.05 correspond 95% PI; default c(0.01, 0.025, seq(0.05, 0.45, = 0.05)) * 2 create range intervals","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_wrap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run glm modeling and forecasting — glm_wrap","text":"Named list two elements: model: Output glm_fit selected model fit forecasts: Output glm_forecast forecasts horizon combined single tibble","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/glm_wrap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run glm modeling and forecasting — glm_wrap","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve data to be used in fitting models hosp_va <-  get_hdgov_hosp(limitcols=TRUE) %>%  prep_hdgov_hosp(statesonly=TRUE, min_per_week = 0, remove_incomplete = TRUE) %>%  dplyr::filter(abbreviation == \"VA\")  # Define list of models models <-  list(    poisson = trending::glm_model(flu.admits ~ hosp_rank + ili_rank, family = \"poisson\"),    quasipoisson = trending::glm_model(flu.admits ~ hosp_rank + ili_rank, family = \"quasipoisson\"),    negbin = trending::glm_nb_model(flu.admits ~ hosp_rank + ili_rank)  )  # Create new covariate data to feed into forecast procedure new_cov <-   dplyr::tibble(     date = max(hosp_va$week_start) + c(7,14,21,28),     epiweek = lubridate::epiweek(date),     epiyear = lubridate::epiyear(date)   ) %>%   dplyr::left_join(     fiphde:::historical_severity, by=\"epiweek\"   ) %>%   dplyr::select(-epiweek,-epiyear)  # Run the glm wrapper to fit and forecast va_glm_res <- glm_wrap(.data = hosp_va, .models = models, new_covariates = new_cov, horizon = 4) va_glm_res  } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/hospitalizations.html","id":null,"dir":"Reference","previous_headings":"","what":"Laboratory-confirmed influenza hospitalizations — hospitalizations","title":"Laboratory-confirmed influenza hospitalizations — hospitalizations","text":"Adapted cdcfluview::hospitalizations. unexported helper function leverages CDC FluView API pull influenza hospitalizations collected surveillance instruments (including FluSurv-NET). data retrieved can parameterized geographic granularity /flu season, includes hospitalization rates age group. function used internally get_cdc_hosp.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hospitalizations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Laboratory-confirmed influenza hospitalizations — hospitalizations","text":"","code":"hospitalizations(   surveillance_area = c(\"flusurv\", \"eip\", \"ihsp\"),   region = \"all\",   years = NULL )"},{"path":"https://signaturescience.github.io/fiphde/reference/hospitalizations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Laboratory-confirmed influenza hospitalizations — hospitalizations","text":"surveillance_area One \"flusurv\", \"eip\", \"ihsp\" region Individual region within surveillance area selected; default \"\" mimics selecting \"Entire Network\" CDC FluView application drop ; see \"Details\" list valid region values surveillance area years vector years retrieve data (.e. 2014 CDC flu season 2014-2015). CDC data API going back 2009 previous flu season. Default value (NULL) means retrieve years. NOTE: happen specify 2-digit season value (.e. 56 == 2016-2017) function smart enough retrieve season ID vs convert year.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hospitalizations.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Laboratory-confirmed influenza hospitalizations — hospitalizations","text":"NOTE: list regions compiled February 2023 querying CDC FluView API. Individual regions may accessible cases. late 2023, query returning results \"Entire Network\" selection. possible value \"surveillance_area\" (\"flusurv\", \"eip\", \"ihsp\") can queried region. following list valid regions: flusurv: \"Entire Network\" eip: \"Entire Network\", \"California\", \"Colorado\", \"Connecticut\", \"Georgia\", \"Maryland\", \"Minnesota\", \"New Mexico\", \"New York - Albany\", \"New York - Rochester\", \"Oregon, \"Tennessee\" ihsp: \"Entire Network\", \"Idaho\", \"Iowa\", \"Michigan\", \"Ohio\", \"Oklahoma\", \"Rhode Island\", \"South Dakota\", \"Utah\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hospitalizations.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Laboratory-confirmed influenza hospitalizations — hospitalizations","text":"Hospital Portal cdcfluview package","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hubverse_format.html","id":null,"dir":"Reference","previous_headings":"","what":"Hubverse formatting — hubverse_format","title":"Hubverse formatting — hubverse_format","text":"unexported helper used internally inside format_for_submission. specifically updates formatting Hubverse guidelines.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hubverse_format.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hubverse formatting — hubverse_format","text":"","code":"hubverse_format(dat, horizon_shift = 1)"},{"path":"https://signaturescience.github.io/fiphde/reference/hubverse_format.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Hubverse formatting — hubverse_format","text":"dat Forecast prepped \"legacy\" format horizon_shift Number horizons shift backwards align reference date; default 1","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hubverse_format.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Hubverse formatting — hubverse_format","text":"Formatted tibble","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/hubverse_format.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Hubverse formatting — hubverse_format","text":"https://github.com/signaturescience/FluSight-forecast-hub/tree/main/model-output#forecast-file-format https://github.com/cdcepi/Flusight-forecast-data/blob/master/data-forecasts/README.md","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ilinet.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve ILINet surveillance data — ilinet","title":"Retrieve ILINet surveillance data — ilinet","text":"Adapted cdcfluview::ilinet. unexported helper function retrieves current historical ILINet surveillance data identified region via CDC FluView API. function used internally get_cdc_ili. Data returned include weighted unweighted ILI percentage, well age-specific ILI outpatient visit counts location / epidemiological week.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ilinet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve ILINet surveillance data — ilinet","text":"","code":"ilinet(region = c(\"national\", \"hhs\", \"census\", \"state\"), years = NULL)"},{"path":"https://signaturescience.github.io/fiphde/reference/ilinet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve ILINet surveillance data — ilinet","text":"region One \"national\", \"hhs\", \"census\", \"state\" years vector years retrieve data (.e. 2014 CDC flu season 2014-2015). CDC data API going back 1997. Default value (NULL) means retrieve years. NOTE: happen specify 2-digit season value (.e. 57 == 2017-2018) function smart enough retrieve season ID vs convert year.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ilinet.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Retrieve ILINet surveillance data — ilinet","text":"cdcfluview package CDC FluView Portal","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/is_monday.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Monday — is_monday","title":"Check Monday — is_monday","text":"helper function see today Monday.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/is_monday.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Monday — is_monday","text":"","code":"is_monday()"},{"path":"https://signaturescience.github.io/fiphde/reference/is_monday.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Monday — is_monday","text":"Logical indicating whether today Monday","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/is_monday.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Monday — is_monday","text":"","code":"is_monday() #> [1] FALSE"},{"path":"https://signaturescience.github.io/fiphde/reference/make_tsibble.html","id":null,"dir":"Reference","previous_headings":"","what":"Make tsibble — make_tsibble","title":"Make tsibble — make_tsibble","text":"function converts input tibble columns lubridate::epiyear lubridate::epiweek  tsibble::tsibble object. tsibble columns specifying indices time series well date Monday epiyear/epiweek combination row.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/make_tsibble.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make tsibble — make_tsibble","text":"","code":"make_tsibble(df, epiyear, epiweek, key = location)"},{"path":"https://signaturescience.github.io/fiphde/reference/make_tsibble.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make tsibble — make_tsibble","text":"df tibble containing columns epiyear epiweek. epiyear Unquoted variable name containing MMWR epiyear. epiweek Unquoted variable name containing MMWR epiweek. key Unquoted variable name containing name column tsibble key. See tsibble::as_tsibble.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/make_tsibble.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make tsibble — make_tsibble","text":"tsibble containing additional columns monday indicating date Monday epiweek, yweek (yearweek vctr class object) indexes tsibble 1 week increments.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/make_tsibble.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make tsibble — make_tsibble","text":"","code":"# Create an example tibble d <- tibble::tibble(epiyear=c(2020, 2020, 2021, 2021),                     epiweek=c(52, 53, 1, 2),                     location=\"US\",                     somedata=101:104) # Convert to tsibble (keyed time series tibble) make_tsibble(d, epiyear = epiyear, epiweek=epiweek, key=location) #> # A tsibble: 4 x 6 [1W] #> # Key:       location [1] #>   epiyear epiweek monday        yweek location somedata #>     <dbl>   <dbl> <date>       <week> <chr>       <int> #> 1    2020      52 2020-12-21 2020 W52 US            101 #> 2    2020      53 2020-12-28 2020 W53 US            102 #> 3    2021       1 2021-01-04 2021 W01 US            103 #> 4    2021       2 2021-01-11 2021 W02 US            104"},{"path":"https://signaturescience.github.io/fiphde/reference/mmwr_week_to_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert MMWR format to date — mmwr_week_to_date","title":"Convert MMWR format to date — mmwr_week_to_date","text":"Adapted cdcfluview::mmwr_week_to_date. function transforms MMWR epidemiological year+week (year+week+day) date object. implemented based cdcfluview::mmwr_week_to_date function, adapted similar functionality MMWRweek package.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mmwr_week_to_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert MMWR format to date — mmwr_week_to_date","text":"","code":"mmwr_week_to_date(year, week, day = NULL)"},{"path":"https://signaturescience.github.io/fiphde/reference/mmwr_week_to_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert MMWR format to date — mmwr_week_to_date","text":"year Vector epidemiological year(s); must length \"week\" \"day\" (unless \"day\" NULL) week Vector epidemiological week(s); must length \"year\" \"day\" (unless \"day\" NULL) day Vector day(s); must length \"week\" \"year\" (unless set NULL); default NULL day returned first day epidemiological week (.e., Sunday)","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mmwr_week_to_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert MMWR format to date — mmwr_week_to_date","text":"Vector date objects many elements input year(s), week(s), day(s)","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mmwr_week_to_date.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Convert MMWR format to date — mmwr_week_to_date","text":"cdcfluview package","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mmwr_week_to_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert MMWR format to date — mmwr_week_to_date","text":"","code":"mmwr_week_to_date(2020,1) #> [1] \"2019-12-29\" mmwr_week_to_date(2020,1,5) #> [1] \"2020-01-02\" mmwr_week_to_date(c(2020,2021,2022),c(1,2,8), c(1,1,7)) #> [1] \"2019-12-29\" \"2021-01-10\" \"2022-02-26\""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum non-zero — mnz","title":"Minimum non-zero — mnz","text":"Helper function get minimum non-zero positive value vector. Used internally mnz_replace.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum non-zero — mnz","text":"","code":"mnz(x)"},{"path":"https://signaturescience.github.io/fiphde/reference/mnz.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Minimum non-zero — mnz","text":"x numeric vector","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Minimum non-zero — mnz","text":"minimum non-zero positive value x","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minimum non-zero — mnz","text":"","code":"x <- c(.1, 0, -.2, NA, .3, .4, .0001, -.3, NA, 999) x #>  [1]   0.1000   0.0000  -0.2000       NA   0.3000   0.4000   0.0001  -0.3000 #>  [9]       NA 999.0000 mnz(x) #> [1] 1e-04"},{"path":"https://signaturescience.github.io/fiphde/reference/mnz_replace.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum non-zero replacement — mnz_replace","title":"Minimum non-zero replacement — mnz_replace","text":"Replace zeros negative values minimum non-zero positive value vector.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz_replace.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum non-zero replacement — mnz_replace","text":"","code":"mnz_replace(x)"},{"path":"https://signaturescience.github.io/fiphde/reference/mnz_replace.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Minimum non-zero replacement — mnz_replace","text":"x numeric vector","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz_replace.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Minimum non-zero replacement — mnz_replace","text":"vector length negatives zeros replaced minimum nonzero value vector.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/mnz_replace.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minimum non-zero replacement — mnz_replace","text":"","code":"x <- c(.1, 0, -.2, NA, .3, .4, .0001, -.3, NA, 999) x #>  [1]   0.1000   0.0000  -0.2000       NA   0.3000   0.4000   0.0001  -0.3000 #>  [9]       NA 999.0000 mnz(x) #> [1] 1e-04 mnz_replace(x) #>  [1]   0.1000   0.0001   0.0001       NA   0.3000   0.4000   0.0001   0.0001 #>  [9]       NA 999.0000 tibble::tibble(x) %>% dplyr::mutate(x2=mnz_replace(x)) #> # A tibble: 10 × 2 #>           x       x2 #>       <dbl>    <dbl> #>  1   0.1      0.1    #>  2   0        0.0001 #>  3  -0.2      0.0001 #>  4  NA       NA      #>  5   0.3      0.3    #>  6   0.4      0.4    #>  7   0.0001   0.0001 #>  8  -0.3      0.0001 #>  9  NA       NA      #> 10 999      999"},{"path":"https://signaturescience.github.io/fiphde/reference/ns_impute.html","id":null,"dir":"Reference","previous_headings":"","what":"Non-seasonal flu hospitalization imputation — ns_impute","title":"Non-seasonal flu hospitalization imputation — ns_impute","text":"unexported helper function used create \"non-seasonal\", location-specific imputation estimate weekly NHSN flu hospitalization counts. imputation approach motivated change reporting requirements NHSN hospital respiratory disease metrics, became optional April 2024 November 2024. function includes four different approaches (see 'Details' ) adjusting /filling gap state-level flu hospitalization reporting.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ns_impute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Non-seasonal flu hospitalization imputation — ns_impute","text":"","code":"ns_impute(   dat,   location,   method = \"val\",   begin_date = \"2024-04-28\",   end_date = \"2024-11-02\" )"},{"path":"https://signaturescience.github.io/fiphde/reference/ns_impute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Non-seasonal flu hospitalization imputation — ns_impute","text":"dat tibble hospitalization data prepared either prep_hdgov_hosp prep_nhsn_weekly location FIPS code location impute method Imputation method use; must one \"val\", \"diff\", \"median\", \"partial\" (see 'Details' ); default \"val\" begin_date Start date imputation YYYY-MM-DD format; default \"2024-04-28\" end_date End date imputation YYYY-MM-DD; default \"2024-11-02\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ns_impute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Non-seasonal flu hospitalization imputation — ns_impute","text":"tibble structure input \"dat\" argument, weeks \"begin_date\" \"end_date\" imputed.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ns_impute.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Non-seasonal flu hospitalization imputation — ns_impute","text":"four possible methods imputing non-seasonal weeks implemented function: \"val\": Random sampling vector values including flu hospitalizations reported weeks June-October 2022 June-October 2023 given location; first last values defined median random sample recent un-imputed value (.e., week imputation begins week imputation ends) \"diff\": Random sampling vector week--week differences flu hospitalizations reported weeks June-October 2022 June-October 2023 given location \"median\": Median 2022 2023 values reported given epiweek \"partial\": Uses adjust_partial=TRUE flag prep_nhsn_weekly function fill weeks date range specified","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://signaturescience.github.io/fiphde/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot forecasts — plot_forecast","title":"Plot forecasts — plot_forecast","text":"function serves plotting mechanism prepped forecast submission data. plots show historical trajectory truth data supplied along forecasted point estimates (optionally) prediction interval. plots faceted location. Note \".data\" \"submission\" arguments function expect incoming data prepared certain format. See argument documentation \"Details\" information.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot forecasts — plot_forecast","text":"","code":"plot_forecast(   .data,   submission,   location = \"US\",   pi = 0.95,   .model = NULL,   .outcome = \"flu.admits\",   format = \"legacy\" )"},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot forecasts — plot_forecast","text":".data data frame historical truth data locations outcomes submission targets submission Formatted submission (e.g., tibble containing forecasts prepped format_for_submission) location Vector specifying locations filter ; 'US' default. pi Width prediction interval plot; default 0.95 95% PI; set NULL PI plotted .model Name model used generate forecasts; default NULL name model assumed stored column called \"model\" formatted submission file .outcome name outcome variable plotting historical data; defaults \"flu.admits\" format submission format used; must one \"hubverse\" \"legacy\"; default \"legacy\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot forecasts — plot_forecast","text":"ggplot2 plot object line plots outcome trajectories faceted location","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot forecasts — plot_forecast","text":"plot forecasted output alongside observed historical data, \".data\" \"submission\" data must prepared geographic temporal resolutions. data frame passed \".data\" must include column specified \".outcome\" argument well following columns: location: FIPS location code week_end: Date last day (Saturday) given epidemiological week format \"legacy\" \"submission\" data probabilistic forecast prepared tibble minimum following columns: forecast_date: Date forecast target: Horizon name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: FIPS code location type: One either \"point\" \"quantile\" forecasted value quantile: quantile forecasted value; NA \"type\" \"point\" value: forecasted value format \"hubverse\" \"submission\" data probabilistic forecast prepared tibble minimum following columns: reference_date: Date reference forecast submission horizon: Horizon given forecast target: Name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: Name geographic identifier (e.g., FIPS code) location given forecast output_type: Type forecasted value (e.g., \"quantile\") output_type_id: quantile forecasted value output_type \"quantile\" value: forecasted value \"submission\" data may optionally include column name model used, multiple models can visualized plot.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot forecasts — plot_forecast","text":"","code":"if (FALSE) { # \\dontrun{ # Get some data h_raw <- get_hdgov_hosp(limitcols=TRUE)  # Prep all the data prepped_hosp_all <- prep_hdgov_hosp(h_raw)  # What are the last four weeks of recorded data? last4 <-   prepped_hosp_all %>%   dplyr::distinct(week_start) %>%   dplyr::arrange(week_start) %>%   tail(4)  # Remove those prepped_hosp <-   prepped_hosp_all %>%   dplyr::anti_join(last4, by=\"week_start\")  # Make a tsibble prepped_hosp_tsibble <- make_tsibble(prepped_hosp,                                      epiyear = epiyear,                                      epiweek=epiweek,                                      key=location) # Limit to just one state and US prepped_hosp_tsibble <-   prepped_hosp_tsibble %>%   dplyr::filter(location %in% c(\"US\", \"51\"))  # Fit models and forecasts hosp_fitfor <- ts_fit_forecast(prepped_hosp_tsibble,                                horizon=4L,                                outcome=\"flu.admits\",                                trim_date=NULL,                                covariates=TRUE)  # Format for submission hosp_formatted <- ts_format_for_submission(hosp_fitfor$tsfor)  # Plot with current and all data plot_forecast(prepped_hosp, hosp_formatted$ensemble) plot_forecast(prepped_hosp_all, hosp_formatted$ensemble) plot_forecast(prepped_hosp, hosp_formatted$ensemble, location=c(\"US\", \"51\")) plot_forecast(prepped_hosp_all, hosp_formatted$ensemble, location=c(\"US\", \"51\")) plot_forecast(prepped_hosp, hosp_formatted$ets) plot_forecast(prepped_hosp_all, hosp_formatted$ets) plot_forecast(prepped_hosp, hosp_formatted$arima) plot_forecast(prepped_hosp_all, hosp_formatted$arima)  # Demonstrating multiple models prepped_hosp <-   h_raw %>%   prep_hdgov_hosp(statesonly=TRUE, min_per_week = 0, remove_incomplete = TRUE) %>%   dplyr::filter(abbreviation != \"DC\") %>%   dplyr::filter(week_start < as.Date(\"2022-01-08\", format = \"%Y-%m-%d\"))  tsens_20220110 <-   system.file(\"extdata/2022-01-10-SigSci-TSENS.csv\", package=\"fiphde\") %>%   readr::read_csv(show_col_types = FALSE) creg_20220110 <-   system.file(\"extdata/2022-01-10-SigSci-CREG.csv\", package=\"fiphde\") %>%   readr::read_csv(show_col_types = FALSE) combo_20220110 <- dplyr::bind_rows(   dplyr::mutate(tsens_20220110, model = \"SigSci-TSENS\"),   dplyr::mutate(creg_20220110, model = \"SigSci-CREG\") ) plot_forecast(prepped_hosp, combo_20220110, location = \"24\") plot_forecast(prepped_hosp, tsens_20220110, location = \"24\") plot_forecast(prepped_hosp, combo_20220110, location = c(\"34\",\"36\")) plot_forecast(prepped_hosp, creg_20220110, location = \"US\", .model = \"SigSci-CREG\") plot_forecast(prepped_hosp, creg_20220110, location = \"US\", .model = \"SigSci-CREG\")  ## demonstrating different prediction interval widths plot_forecast(prepped_hosp, combo_20220110, location = \"24\", pi = 0.5) plot_forecast(prepped_hosp, combo_20220110, location = \"24\", pi = 0.9) plot_forecast(prepped_hosp, combo_20220110, location = \"24\", pi = 0.95) plot_forecast(prepped_hosp, combo_20220110, location = \"24\", pi = NULL) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast_categorical.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot categorical forecasts — plot_forecast_categorical","title":"Plot categorical forecasts — plot_forecast_categorical","text":"function creates bar plot categorical forecasts. See examples demonstration usage.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast_categorical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot categorical forecasts — plot_forecast_categorical","text":"","code":"plot_forecast_categorical(categorical_forecast, format = \"hubverse\")"},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast_categorical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot categorical forecasts — plot_forecast_categorical","text":"categorical_forecast Either tibble categorical forecasts created forecast_categorical prepared forecast submission \"hubverse\" format (see Details) format Either \"hubverse\" \"legacy\"; \"hubverse\" format require input forecast includes output \"pmf\" (see Details); default \"hubverse\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast_categorical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot categorical forecasts — plot_forecast_categorical","text":"ggplot2 object categorical forecasts shown stacked bar plot.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast_categorical.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot categorical forecasts — plot_forecast_categorical","text":"categorical plotting function works \"legacy\" formatting (.e., format used 2022-23 FluSight season) \"hubverse\" formatting (.e., format used 2023-24 FluSight season). Unlike \"legacy\" format, \"hubverse\" format allows quantile categorical forecasts co-mingled submission object. format specified \"hubverse\", plot_forecast_categorical() function interally look \"pmf\" forecasts.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/plot_forecast_categorical.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot categorical forecasts — plot_forecast_categorical","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve hospitalization data h_raw <- get_hdgov_hosp(limitcols=TRUE) # Prepare and summarize hospitalization data to weekly resolution prepped_hosp <- prep_hdgov_hosp(h_raw) # Create a keyed time series tibble with only locations of interest prepped_tsibble <- make_tsibble(prepped_hosp,                                      epiyear = epiyear,                                      epiweek=epiweek,                                      key=location) # Run with default constrained ARIMA, nonseasonal ETS, no NNETAR hosp_fitfor <- ts_fit_forecast(prepped_tsibble,                                horizon=4L,                                outcome=\"flu.admits\") # Prepare forecast for quantile submission format prepped_forecast <- format_for_submission(hosp_fitfor$tsfor, method = \"ts\", format = \"hubverse\") # Run categorical summary of quantiles for the time series ensemble categorical_forecast <- forecast_categorical(prepped_forecast$ensemble, prepped_hosp, format = \"hubverse\") # Plot the categorical forecast plot_forecast_categorical(categorical_forecast, format = \"hubverse\") } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/pois_forc.html","id":null,"dir":"Reference","previous_headings":"","what":"Simple Poisson count forecaster — pois_forc","title":"Simple Poisson count forecaster — pois_forc","text":"function helper forecasts Poisson counts near-term horizons based characteristics recently observed count data. function effectively takes rolling average recent observations (augmenting forecasted horizon horizons progress), uses average parameter Lambda random draw Poisson distribution.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/pois_forc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simple Poisson count forecaster — pois_forc","text":"","code":"pois_forc(.data, .location, .var, horizon = 4)"},{"path":"https://signaturescience.github.io/fiphde/reference/pois_forc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simple Poisson count forecaster — pois_forc","text":".data Data frame incoming data includes variable counts (see \".var\" argument), location (must stored column called \"location\") variable sorting date (must stored column called \"week_start\") .location name location interest .var Bare, unquoted name variable counts forecasted horizon number horizons ahead forecast; must one 4 5; default 4","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/pois_forc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simple Poisson count forecaster — pois_forc","text":"Vector Poisson forecasts number horizons specified.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/pois_forc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simple Poisson count forecaster — pois_forc","text":"","code":"if (FALSE) { # \\dontrun{ all_clin <- get_cdc_clin() va_ahead <-   dplyr::tibble(     n_positive = pois_forc(all_clin, .location = \"51\", n_positive),     total = pois_forc(all_clin, .location = \"51\", total),     p_positive = n_positive / total) va_ahead } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":null,"dir":"Reference","previous_headings":"","what":"Prep hospitalization data — prep_hdgov_hosp","title":"Prep hospitalization data — prep_hdgov_hosp","text":"function prepares hospitalization data retrieved using get_hdgov_hosp downstream forecasting. function optionally limits states , trims given date, removes incomplete weeks, removes locations little reporting last month.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prep hospitalization data — prep_hdgov_hosp","text":"","code":"prep_hdgov_hosp(   hdgov_hosp,   statesonly = TRUE,   trim = list(epiyear = 2020, epiweek = 43),   remove_incomplete = TRUE,   min_per_week = 1,   augment = FALSE,   augment_stop = \"2020-10-18\" )"},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prep hospitalization data — prep_hdgov_hosp","text":"hdgov_hosp Daily hospital utilization data get_hdgov_hosp statesonly Logical whether limit US+DC+States (.e., drop territories); default TRUE trim Named list elements epiyear epiweek corresponding minimum epidemiological week retain; defaults list(epiyear=2020, epiweek=43), first date report healthdata.gov hospitalization data; set NULL data trimmed remove_incomplete Logical whether remove last week incomplete; default TRUE min_per_week minimum number flu.admits per week needed retain state. Default removes states less 1 flu admission per week last 30 days. augment Logical whether data augmented NHSN hospitalizations imputed backwards time (see 'Details' ); default FALSE augment_stop Date time series imputation data stop; yyyy-mm-dd format; used \"augment\" TRUE default \"2020-10-18\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prep hospitalization data — prep_hdgov_hosp","text":"tibble hospitalization data summarized epiyear/epiweek following columns: abbreviation: Abbreviation location location: FIPS code location week_start: Date beginning (Sunday) given epidemiological week monday: Date Monday given epidemiological week week_end: Date end (Saturday) given epidemiological week epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) flu.admits: Count flu cases among admitted patients previous week flu.admits.cov: Coverage (number hospitals reporting) incident flu cases ili_mean: Estimate historical ILI activity given epidemiological week ili_rank: Rank given epidemiological week terms ILI activity across season (1 highest average activity) hosp_mean: Estimate historical flu hospitalization rate given epidemiological week hosp_rank: Rank given epidemiological week terms flu hospitalizations across season (1 highest average activity)","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prep hospitalization data — prep_hdgov_hosp","text":"preparation weekly flu hospitalization data includes option \"augment\" input time series. augmentation based extended time series developed imputation approach. extended time series estimates flu hospitalizations state-level years NHSN reporting became available. user decides include imputed data, time series extended backwards time \"augment_stop\" date (defaults October 18, 2020). prepended data augmentation formatted match NSHN reporting format. details data augmentation approach, refer publication: https://www.medrxiv.org/content/10.1101/2024.07.31.24311314.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Prep hospitalization data — prep_hdgov_hosp","text":"https://www.medrxiv.org/content/10.1101/2024.07.31.24311314","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_hdgov_hosp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prep hospitalization data — prep_hdgov_hosp","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve hospitalization data hdgov_hosp <- get_hdgov_hosp(limitcols=TRUE) # Prepare and summarize to weekly resolution h <- prep_hdgov_hosp(hdgov_hosp) h } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/prep_nhsn_weekly.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare NHSN weekly data — prep_nhsn_weekly","title":"Prepare NHSN weekly data — prep_nhsn_weekly","text":"function prepares data retrieved weekly aggregated NHSN hospital respiratory data API. data must first retrieved using get_nhsn_weekly. pulled API, function conditionally adjust partial reporting add extended time series data (see 'Details' information). preparation also includes joining internal data prepared estimate historical severity epiweek.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_nhsn_weekly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare NHSN weekly data — prep_nhsn_weekly","text":"","code":"prep_nhsn_weekly(   dat,   adjust_partial = TRUE,   trim = NULL,   statesonly = TRUE,   augment = FALSE,   augment_stop = \"2020-10-18\" )"},{"path":"https://signaturescience.github.io/fiphde/reference/prep_nhsn_weekly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare NHSN weekly data — prep_nhsn_weekly","text":"dat Weekly hospital utilization data get_nhsn_weekly adjust_partial Logical whether partial reporting adjusted (see 'Details' ); default TRUE trim Named list elements epiyear epiweek corresponding minimum epidemiological week retain; default set NULL data trimmed; override default use named list (e.g., list(epiyear=2020, epiweek=43)) statesonly Logical whether data limited states DC (.e., territories included); default TRUE augment Logical whether data augmented NHSN hospitalizations imputed backwards time (see 'Details' ); default FALSE augment_stop Date time series imputation data stop; yyyy-mm-dd format; used \"augment\" TRUE default \"2020-10-18\"","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_nhsn_weekly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare NHSN weekly data — prep_nhsn_weekly","text":"tibble hospitalization data summarized epiyear/epiweek following columns: abbreviation: Abbreviation location location: FIPS code location week_start: Date beginning (Sunday) given epidemiological week monday: Date Monday given epidemiological week week_end: Date end (Saturday) given epidemiological week epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) flu.admits: Count flu cases among admitted patients previous week flu.admits.cov: Coverage (number hospitals reporting) incident flu cases ili_mean: Estimate historical ILI activity given epidemiological week ili_rank: Rank given epidemiological week terms ILI activity across season (1 highest average activity) hosp_mean: Estimate historical flu hospitalization rate given epidemiological week hosp_rank: Rank given epidemiological week terms flu hospitalizations across season (1 highest average activity)","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_nhsn_weekly.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prepare NHSN weekly data — prep_nhsn_weekly","text":"weekly aggregated data NHSN includes locations may incomplete coverage hospitals reporting (see https://data.cdc.gov/Public-Health-Surveillance/Weekly-Hospital-Respiratory-Data-HRD-Metrics--Ju/mpgq-jmmr/about_data information). preparation function includes optional step triggered \"adjust_partial\" argument find maximum coverage time point location, adjusts reported counts factor X / Y_t, X maximum coverage Y_t coverage time point t. coverage given week near equal maximum observed coverage, counts little effect counts. Note used caution, possible locations may non-uniform reporting behaviors, especially non-mandatory NHSN reporting windows. words, counts may adjusted using reported values healthcare facilities may different size, serve different communities, otherwise different characteristics facilities report. preparation weekly flu hospitalization data includes option \"augment\" input time series. augmentation based extended time series developed imputation approach. extended time series estimates flu hospitalizations state-level years NHSN reporting became available. user decides include imputed data, time series extended backwards time \"augment_stop\" date (defaults October 18, 2020). prepended data augmentation formatted match true NSHN reporting. details data augmentation approach, refer publication: https://www.medrxiv.org/content/10.1101/2024.07.31.24311314.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/prep_nhsn_weekly.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Prepare NHSN weekly data — prep_nhsn_weekly","text":"https://www.medrxiv.org/content/10.1101/2024.07.31.24311314","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/replace_ili_nowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace ILINet data with nowcast — replace_ili_nowcast","title":"Replace ILINet data with nowcast — replace_ili_nowcast","text":"function replaces weighted ILI retrieved get_cdc_ili nowcast data locations original data. function first attempt use ILI Nearby nowcasts pulled using get_nowcast_ili. ILI Nearby nowcasts unavailable, function optionally fallback pseudo nowcast method averages observed ILI 4 recent weeks. nowcast data used add 1 additional week observed ILI data (optionally) replace number weeks specified \"weeks_to_replace\" argument.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/replace_ili_nowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace ILINet data with nowcast — replace_ili_nowcast","text":"","code":"replace_ili_nowcast(   ilidat,   start_date = NULL,   weeks_to_replace = 1,   fallback = TRUE,   try_api = TRUE )"},{"path":"https://signaturescience.github.io/fiphde/reference/replace_ili_nowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace ILINet data with nowcast — replace_ili_nowcast","text":"ilidat ILI data retrieved via get_cdc_ili start_date Date start nowcasting; default lubridate::today weeks_to_replace Number weeks ilidat replace; default 1 fallback Logical whether fall back pseudo nowcast (average last 4 ILI weeks given location) nowcast data unavailable; default TRUE try_api Logical whether function try ILI Nearby nowcast API; default TRUE; FALSE function attempt query API ","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/replace_ili_nowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace ILINet data with nowcast — replace_ili_nowcast","text":"tibble following columns: location: FIPS code location region_type: type location abbreviation: Abbreviation location region: Name region epiyear: Year reporting (epidemiological week calendar) epiweek: Week reporting (epidemiological week calendar) week_start: Date beginning (Sunday) given epidemiological week weighted_ili: Population-weighted percentage ILI outpatient visits","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/replace_ili_nowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace ILINet data with nowcast — replace_ili_nowcast","text":"","code":"if (FALSE) { # \\dontrun{ ilidat <- get_cdc_ili(years=2021) ilidat <-   ilidat %>%   dplyr::filter(location==\"US\" | abbreviation==\"VA\") %>%   dplyr::group_by(location) %>%   dplyr::slice_max(week_start, n=4) %>%   dplyr::select(location:weighted_ili) ilidat iliaug <- replace_ili_nowcast(ilidat, weeks_to_replace=1) iliaug } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/round_preserve.html","id":null,"dir":"Reference","previous_headings":"","what":"Round and preserve vector — round_preserve","title":"Round and preserve vector — round_preserve","text":"unexported helper used ensure categorical forecasts rounded sum 1.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/round_preserve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Round and preserve vector — round_preserve","text":"","code":"round_preserve(x, digits = 0)"},{"path":"https://signaturescience.github.io/fiphde/reference/round_preserve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Round and preserve vector — round_preserve","text":"x Numeric vector values round digits number digits use precision; defalut 0","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/round_preserve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Round and preserve vector — round_preserve","text":"Vector length \"x\" values rounded","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/smoothie.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate smoothed and weighted averages of previous observations — smoothie","title":"Calculate smoothed and weighted averages of previous observations — smoothie","text":"helper function calculates weighted average last n observations.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/smoothie.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate smoothed and weighted averages of previous observations — smoothie","text":"","code":"smoothie(x, n = 4, weights = c(1, 2, 3, 4))"},{"path":"https://signaturescience.github.io/fiphde/reference/smoothie.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate smoothed and weighted averages of previous observations — smoothie","text":"x Incoming vector observations n Number recent observations smooth; default 4 weights Vector weights applied last n observations averaging","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/smoothie.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate smoothed and weighted averages of previous observations — smoothie","text":"Vector length 1 weighted average last n observations.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/smoothie.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate smoothed and weighted averages of previous observations — smoothie","text":"","code":"if (FALSE) { # \\dontrun{ ## pull and prep weekly US flu hospitalization data hosp_us <-   get_hdgov_hosp() %>%   prep_hdgov_hosp() %>%   dplyr::filter(location == \"US\")  ## what do the last 4 observations look like? tail(hosp_us$flu.admits, 4)  ## smooth over last 4 with default weights smoothie(hosp_us$flu.admits, n=4, weights=c(1,2,3,4))  ## try smoothing over last 4 with different weights (exponential this time) smoothie(hosp_us$flu.admits, n=4, weights=exp(1:4)) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/this_monday.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Monday — this_monday","title":"Get Monday — this_monday","text":"function helper get date Monday current week. function determines current week based epidemiological week orientation (.e., week begins Sunday).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/this_monday.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Monday — this_monday","text":"","code":"this_monday()"},{"path":"https://signaturescience.github.io/fiphde/reference/this_monday.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Monday — this_monday","text":"Date Monday current week.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/this_monday.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Monday — this_monday","text":"","code":"this_monday() #> [1] \"2024-12-23\""},{"path":"https://signaturescience.github.io/fiphde/reference/this_saturday.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Saturday — this_saturday","title":"Get Saturday — this_saturday","text":"function helper get date Saturday current week. function determines current week based epidemiological week orientation (.e., week begins Sunday).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/this_saturday.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Saturday — this_saturday","text":"","code":"this_saturday()"},{"path":"https://signaturescience.github.io/fiphde/reference/this_saturday.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Saturday — this_saturday","text":"Date Saturday current week.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/this_saturday.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Saturday — this_saturday","text":"","code":"this_saturday() #> [1] \"2024-12-28\""},{"path":"https://signaturescience.github.io/fiphde/reference/to_num.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean numeric values — to_num","title":"Clean numeric values — to_num","text":"unexported helper used ilinet function strip special characters empty space convert character vector numeric.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/to_num.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean numeric values — to_num","text":"","code":"to_num(x)"},{"path":"https://signaturescience.github.io/fiphde/reference/to_num.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean numeric values — to_num","text":"x Input character vector special characters stripped converted","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/to_num.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean numeric values — to_num","text":"Numeric vector","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit and forecast with time-series approaches — ts_fit_forecast","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"function allows user fit time series models forecast values specified horizon. Starting tsibble object (see make_tsibble), function fits models specified list \"models\" argument. \"Details\" section provides information parameterize models used. Note input tsibble \"keyed\" (e.g., grouped location) procedure fit forecast independently grouping.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"","code":"ts_fit_forecast(   prepped_tsibble,   outcome = \"flu.admits\",   horizon = 4L,   trim_date = \"2021-01-01\",   models = list(arima = \"PDQ(0, 0, 0) + pdq(1:2, 0:2, 0)\", ets =     \"season(method=\\\"N\\\")\", nnetar = NULL),   covariates = TRUE,   ensemble = TRUE )"},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"prepped_tsibble tsibble data formatted via make_tsibble outcome outcome variable model; default \"flu.admits\" horizon Number weeks ahead forecast trim_date date (YYYY-MM-DD) time series models start fitting; default \"2021-01-01\"; set NULL input data trimmed (.e., data used fit time series models) models list right hand side formula contents models want run; default list(arima='PDQ(0, 0, 0) + pdq(1:2, 0:2, 0)', ets='season(method=\"N\")', nnetar=NULL) runs constrained ARIMA, non-seasonal ETS, ignores NNETAR model; see \"Details\" information covariates Logical. flu hospitalization-specific covariates modeled time series? , historical hospitalization ILI rank epidemiological week, brought prep_hdgov_hosp, added ARIMA model. ensemble Logical whether models ensembled (using mean); default TRUE","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"list time series fit, time series forecast, model formulas. tsfit: mdl_df class \"mable\" one row location, columns arima ets models. tsfor: fbl_ts class \"fable\" one row per location-model-timepoint horizon number time points. formulas: list ARIMA, ETS, /NNETAR formulas","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"fitting time series models, set models used (parameters) can defined via named list passed \"models\" argument. list contain elements define right-hand side model formulas. function internally uses fable::fable package, models provided must part fable ecosystem time series models. models passed must named \"arima\", \"ets\", \"nnetar\". skip one models set named argument given model NULL. \"models\" argument defaults list(arima = \"PDQ(0, 0, 0) + pdq(1:2, 0:2, 0)\", ets = \"season(method='N')\", nnetar = NULL). run unconstrained ARIMA: list(arima='PDQ() + pdq()') (see fable::ARIMA). run seasonal exponential smoothing: list(ets='season(method=c(\"\", \"M\", \"N\"), period=\"3 months\")') (see fable::ETS). run autoregressive neural net P=1: list(nnetar=\"AR(P=1)\") (see fable::NNETAR).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"https://fable.tidyverts.org/","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_fit_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit and forecast with time-series approaches — ts_fit_forecast","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve hospitalization data h_raw <- get_hdgov_hosp(limitcols=TRUE) # Prepare and summarize hospitalization data to weekly resolution prepped_hosp <- prep_hdgov_hosp(h_raw) # Create a keyed time series tibble with only locations of interest prepped_tsibble <- make_tsibble(prepped_hosp,                                 epiyear = epiyear,                                 epiweek=epiweek,                                 key=location) %>%   dplyr::filter(location %in% c(\"US\", \"51\"))  # Run with default constrained ARIMA, nonseasonal ETS, no NNETAR hospfor1 <- ts_fit_forecast(prepped_tsibble,                             horizon=4L,                             outcome=\"flu.admits\",                             covariates=TRUE) # Run an unconstrained ARIMA, seasonal ETS, no NNETAR hospfor2 <- ts_fit_forecast(prepped_tsibble,                             horizon=4L,                             outcome=\"flu.admits\",                             covariates=TRUE,                             models=list(arima='PDQ() + pdq()',                                         ets='season(method=c(\"A\", \"M\", \"N\"), period=\"3 months\")',                                         nnetar=NULL)) # Run an unconstrained ARIMA, seasonal ETS, NNETAR hospfor3 <- ts_fit_forecast(prepped_tsibble,                             horizon=4L,                             outcome=\"flu.admits\",                             covariates=TRUE,                             models=list(arima='PDQ() + pdq()',                                         ets='season(method=c(\"A\", \"M\", \"N\"), period=\"3 months\")',                                         nnetar=\"AR(P=1)\")) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":null,"dir":"Reference","previous_headings":"","what":"Format time series forecast — ts_format_for_submission","title":"Format time series forecast — ts_format_for_submission","text":"function specifically formats time series forecasts generated ts_fit_forecast adhere probabilistic forecast submission guidelines consortia FluSight. used helper format_for_submission.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format time series forecast — ts_format_for_submission","text":"","code":"ts_format_for_submission(   tsfor,   .target = \"wk ahead inc flu hosp\",   .counts = TRUE )"},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format time series forecast — ts_format_for_submission","text":"tsfor forecast ts_fit_forecast .target Name target forecast; default \"wk ahead inc flu hosp\" .counts Logical; default TRUE indicates target outcome count, rounded integer","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format time series forecast — ts_format_for_submission","text":"named list tibbles probabilistic forecasts (one model), formatted submission following columns: forecast_date: Date forecast target: Horizon name forecasted target target_end_date: Last date forecasted target (e.g., Saturday given epidemiological week) location: FIPS code location type: One either \"point\" \"quantile\" forecasted value quantile: quantile forecasted value; NA \"type\" \"point\" value: forecasted value","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format time series forecast — ts_format_for_submission","text":"Uses quantiles c(0.01, 0.025, seq(0.05, 0.95, = 0.05), 0.975, 0.99) built-fiphde:::q, using accessory table fiphde:::quidk.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Format time series forecast — ts_format_for_submission","text":"https://github.com/cdcepi/Flusight-forecast-data/blob/master/data-forecasts/README.md","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/ts_format_for_submission.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format time series forecast — ts_format_for_submission","text":"","code":"if (FALSE) { # \\dontrun{ # Get raw data from healthdata.gov h_raw <- get_hdgov_hosp(limitcols=TRUE)  # Prep, and make a tsibble prepped_hosp <- prep_hdgov_hosp(h_raw, statesonly=TRUE) prepped_hosp_tsibble <- make_tsibble(prepped_hosp,                                      epiyear = epiyear,                                      epiweek=epiweek,                                      key=location) # Limit to only Virginia and US prepped_hosp_tsibble <-   prepped_hosp_tsibble %>%   dplyr::filter(location %in% c(\"US\", \"51\"))  # Fit a model hosp_fitfor <- ts_fit_forecast(prepped_hosp_tsibble,                                horizon=4L,                                outcome=\"flu.admits\",                                covariates=TRUE)  # Format for submission formatted_list <- ts_format_for_submission(hosp_fitfor$tsfor) formatted_list } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/validate_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate forecast submission — validate_forecast","title":"Validate forecast submission — validate_forecast","text":"function take prepped forecast data format_for_submission run series tests validate format.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/validate_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate forecast submission — validate_forecast","text":"","code":"validate_forecast(subdat)"},{"path":"https://signaturescience.github.io/fiphde/reference/validate_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate forecast submission — validate_forecast","text":"subdat tibble submission ready forecasts prepped stored output format_for_submission","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/validate_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate forecast submission — validate_forecast","text":"Named list elements test (including logical whether test passed message failed) overall \"valid\" logical TRUE tests passed FALSE least one failed","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/validate_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate forecast submission — validate_forecast","text":"","code":"if (FALSE) { # \\dontrun{ # Get raw data from healthdata.gov h_raw <- get_hdgov_hosp(limitcols=TRUE)  # Prep, and make a tsibble prepped_hosp <- prep_hdgov_hosp(h_raw, statesonly=TRUE) prepped_hosp_tsibble <- make_tsibble(prepped_hosp,                                      epiyear = epiyear,                                      epiweek=epiweek,                                      key=location) # Limit to only Virginia and US prepped_hosp_tsibble <-   prepped_hosp_tsibble %>%   dplyr::filter(location %in% c(\"US\", \"51\"))  # Fit a model hosp_fitfor <- ts_fit_forecast(prepped_hosp_tsibble,                                horizon=4L,                                outcome=\"flu.admits\",                                covariates=TRUE)    # Format for submission formatted_list <- format_for_submission(hosp_fitfor$tsfor, method = \"ts\", format = \"legacy\") # Validate one of the forecasts # Note that this expects forecast is prepared with forecast date = Monday of the current week ens_forc <- formatted_list$ensemble ens_forc$forecast_date <- this_monday() validate_forecast(ens_forc) } # }"},{"path":"https://signaturescience.github.io/fiphde/reference/who_nrevss.html","id":null,"dir":"Reference","previous_headings":"","what":"WHO/NREVSS clinical lab surveillance data — who_nrevss","title":"WHO/NREVSS clinical lab surveillance data — who_nrevss","text":"Adapted cdcfluview::who_nrevss. unexported helper function leverages CDC FluView API pull flu surveillance data collected U.S. World Health Organization () Collaborating Laboratories National Respiratory Enteric Virus Surveillance System (NREVSS) laboratories. data retrieved can parameterized geographic granularity /flu season. function used internally get_cdc_clin.","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/who_nrevss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"WHO/NREVSS clinical lab surveillance data — who_nrevss","text":"","code":"who_nrevss(region = c(\"national\", \"hhs\", \"census\", \"state\"), years = NULL)"},{"path":"https://signaturescience.github.io/fiphde/reference/who_nrevss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"WHO/NREVSS clinical lab surveillance data — who_nrevss","text":"region One \"national\", \"hhs\", \"census\", \"state\" years vector years retrieve data (.e. 2014 CDC flu season 2014-2015). CDC data API going back 1997. Default value (NULL) means retrieve years. NOTE: specify 2-digit season value function convert corresponding season identifier (.e. 57 == 2017-2018).","code":""},{"path":"https://signaturescience.github.io/fiphde/reference/who_nrevss.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"WHO/NREVSS clinical lab surveillance data — who_nrevss","text":"cdcfluview package","code":""},{"path":[]},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"extended-time-series-and-augumented-data-2-1-0","dir":"Changelog","previous_headings":"New features","what":"Extended time series and augumented data","title":"fiphde 2.1.0","text":"release, package now includes internal package datasets extended augmented NHSN flu hospitalization time series (fiphde:::nhsn_imputed fiphde:::nhsn_floom). extended time series created using methods published Benefield et al. (2024). augmentation stitches together extended time series (prior 2020) NHSN reporting (2020-2024), weeks April November 2024 filled using imputation approach due limited reporting window. script create final dataset available package source data-raw/floom.R.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"functionality-to-retrieve-data-from-new-nhsn-api-2-1-0","dir":"Changelog","previous_headings":"New features","what":"Functionality to retrieve data from new NHSN API","title":"fiphde 2.1.0","text":"November 2024, NHSN weekly respiratory hospitalization metrics began reported via new API. “preliminary” “final” data now aggregated week reported distinct endpoints. included get_nhsn_weekly() prep_nhsn_weekly() functions retrieve format data endpoints.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"updated-categorical-rate-trend-thresholds-for-flu-season-2-1-0","dir":"Changelog","previous_headings":"New features","what":"Updated categorical rate trend thresholds for 2024-25 flu season","title":"fiphde 2.1.0","text":"FluSight challenge updated thresholds categorical rate changes 2024-25 season (see https://github.com/cdcepi/Flusight-forecast-data/blob/master/data-experimental/README.md details). release brings new crosswalk file apply cutoffs categorical thresholds implements corresponding logic forecast_categorical() function.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"more-options-for-flusurv-net-data-retrieval-2-1-0","dir":"Changelog","previous_headings":"New features","what":"More options for FluSurv-NET data retrieval","title":"fiphde 2.1.0","text":"get_cdc_hosp() function now includes option either retrieve FluSurv-NET reporting RESP-NET API FluView API.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"incorrect-column-names-for-hospitalization-retrival-function-output-2-1-0","dir":"Changelog","previous_headings":"Bug fixes","what":"Incorrect column names for hospitalization retrival function output","title":"fiphde 2.1.0","text":"Previously, get_cdc_hosp() reversed names columns containing dates start end given epiweek. release addresses issue, ensuring columns get_cdc_hosp() output named correctly.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"miscellaneous-fixes-for-documentation-and-examples-2-1-0","dir":"Changelog","previous_headings":"Bug fixes","what":"Miscellaneous fixes for documentation and examples","title":"fiphde 2.1.0","text":"addressed multiple instances unclear misspelled documentation examples failing, marked “run” therefore flagged R CMD CHECK.","code":""},{"path":[]},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"nnetar-in-ensemble-2-0-2","dir":"Changelog","previous_headings":"New features","what":"NNETAR in ensemble","title":"fiphde 2.0.2","text":"release, NNETAR model specified ts_fit_forecast() function (.e., “nnetar” NULL model list) model included ensemble. previous releases, NNETAR method used results included returned forecast fit objects ensembled components. Note currently possible models (ARIMA, ETS, NNETAR) must specified use NNETAR ensemble.","code":""},{"path":[]},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"explorer-app-internal-object-naming-2-0-1","dir":"Changelog","previous_headings":"Bug fixes","what":"Explorer app internal object naming","title":"fiphde 2.0.1","text":"release resolves issue naming internal object plausibility analysis section explorer app.","code":""},{"path":[]},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"accommodation-for-hubverse-formatting-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Accommodation for Hubverse formatting","title":"fiphde 2.0.0","text":"release, package now optionally supports forecast submission prep visualization Hubverse forecast format (https://hubdocs.readthedocs.io/en/latest/user-guide/model-output.html) used 2023-24 FluSight initiative (https://github.com/signaturescience/FluSight-forecast-hub/tree/main/model-output#forecast-file-format). accommodate format, several functions now additional option “format”. Affected functions include format_for_submission(), forecast_categorical(), plot_forecast(). Additionally, explorer app (launched fiphde_launcher()) now includes option specify format input forecasts. cases, format must either “hubverse” “legacy” (.e., previously standardized quantile forecast format).","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"shift-back-for-hhs-hospitalization-data-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Shift back for HHS hospitalization data","title":"fiphde 2.0.0","text":"data retrieved via get_hdgov_hosp() function reports count flu hospitalizations prior day. retrieval function now includes option shift date back report date date previous day. impact weekly aggregation prep_hdgov_hosp(). default “shift_back” option set TRUE.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"probability-density-method-for-categorical-forecasts-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Probability density method for categorical forecasts","title":"fiphde 2.0.0","text":"forecast_categorical() function converts quantile forecasts categorical rate change targets. Previously, method conversion exclusively interpolation procedure. release, function now also supports probability density estimation method using distfromq package (https://reichlab.io/distfromq/). option can toggled using “method” argument. mentioned , forecast_categorical() function now also supports Hubverse formatting. density method available quantile forecasts given “hubverse” format option. Likewise, “interpolation” method available quantile forecasts prepared “legacy” format.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"expanded-horizons-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Expanded horizons","title":"fiphde 2.0.0","text":"functions now accept argument adjust horizons forecasting. particular, pois_forc() helper forecast_categorical() function now can parameterized forecast different horizons.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"updated-rate-change-thresholds-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Updated rate change thresholds","title":"fiphde 2.0.0","text":"2022-23 FluSight guidelines solicited categorical rate change forecasts 2 week horizon. 2023-24, FluSight now solicits forecasts horizons. mind, retrieved updated rate change threshold data .csv format FluSight repository now include “legacy” “hubverse” rate change data internally. cases, internal datasets provide threshold rate change considered increase / decrease given population.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"plausibility-analysis-in-explorer-app-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Plausibility analysis in explorer app","title":"fiphde 2.0.0","text":"release, explorer app now includes plausibility analysis feature built using rplanes package (https://signaturescience.github.io/rplanes/). plausibility analysis intended help guide human forecast review via visualizations. Currently scoring uses default parameters, although users can define components use via select input prior running scoring explorer app.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"additional-example-data-2-0-0","dir":"Changelog","previous_headings":"New features","what":"Additional example data","title":"fiphde 2.0.0","text":"Given new Hubverse compatibility features, package now includes data forecasts prepared format motivate examples testing.","code":""},{"path":[]},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"optionally-bypass-ili-nowcast-api-1-1-1","dir":"Changelog","previous_headings":"New features","what":"Optionally bypass ILI nowcast API","title":"fiphde 1.1.1","text":"replace_ili_nowcast() function includes option “try_api”, set TRUE default try query ILI Nearby nowcast API. set FALSE, function try query API .","code":""},{"path":[]},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"improved-api-for-glm-modeling-1-1-0","dir":"Changelog","previous_headings":"New features","what":"Improved API for GLM modeling","title":"fiphde 1.1.0","text":"release future-proofs GLM modeling forecasting functionality. particular, API now conforms updates trending trendeval packages, used internally inside glm_wrap() helpers. trending trendeval introduced significant changes respective APIs recent releases. fiphde package now requires trending >= 0.1.0 trendeval >= 0.1.0 ensure package functionality works expected.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"explorer-app-enhancements-1-1-0","dir":"Changelog","previous_headings":"New features","what":"Explorer app enhancements","title":"fiphde 1.1.0","text":"release data explorer app (see ?fiphde_launcher()) now organized modules easier backend maintenance. app also several new features usability, including new CSS theme “busy” icon indicate app loading data processing delays outputs rendering.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"fiphde-100","dir":"Changelog","previous_headings":"","what":"fiphde 1.0.0","title":"fiphde 1.0.0","text":"major release introduces new features, improved documentation throughout, automated unit tests, simplified API.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"plot_forecast_categorical-1-0-0","dir":"Changelog","previous_headings":"New features","what":"plot_forecast_categorical()","title":"fiphde 1.0.0","text":"package now includes data visualization method categorical forecast summaries via plot_forecast_categorical() function. function returns ggplot2 object stacked barplot showing probabilities assigned categorical bin every location.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"parity-between-objects-returned-1-0-0","dir":"Changelog","previous_headings":"New features","what":"Parity between objects returned","title":"fiphde 1.0.0","text":"Package functions previously returned mix data.frame tibble objects. release, function returns tibble consistency.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"messaging-for-get_nowcast_ili-1-0-0","dir":"Changelog","previous_headings":"New features","what":"Messaging for get_nowcast_ili()","title":"fiphde 1.0.0","text":"get_nowcast_ili() uses Delphi ILI Nearby API. release, API documented longer updated. function (others call function, like replace_ili_nowcast()) now issue following warning: October 2022 ILInearby longer updated. likely return ‘NA’. See https://github.com/cmu-delphi/delphi-epidata/issues/993","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"simplified-api-1-0-0","dir":"Changelog","previous_headings":"New features","what":"Simplified API","title":"fiphde 1.0.0","text":"API package simplified remove outmoded functions harden arguments needed. list enumerates updates: Removed wis_score() function Removed get_cdc_vax() function Removed state_replace_ili_nowcast_all() function Removed submission/ directory source code repository GitHub intuitive handling arguments ts_fit_forecast(), including case-insensitive model names, better handling optional covariates, removing inoperative “remove_null_models” argument","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"documentation-1-0-0","dir":"Changelog","previous_headings":"New features","what":"Documentation","title":"fiphde 1.0.0","text":"exported functions now robustly documented links package functions, detailed descriptions, examples include inline comments.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"new-features-0-3-4","dir":"Changelog","previous_headings":"","what":"New features","title":"fiphde 0.3.4","text":"release makes two minor updates submission script. script now includes plots categorical forecasts help wit downstream forecast review. Additionally, script now configured use quasipoisson model family count regression grid search procedure.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"bug-fixes-0-3-4","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"fiphde 0.3.4","text":"Previously forecast_categorical() function include probabilities “type_id” values (e.g., increase, large_decrease, etc.) observed least one location. release now include “type_id” values, assigning observed location probability 0.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"new-features-0-3-3","dir":"Changelog","previous_headings":"","what":"New features","title":"fiphde 0.3.3","text":"release, introduce forecast_categorical() generate categorical rate change targets. function takes probabilistic forecast input (values expected quantile) converts probability 2 week ahead trend large decrease, decrease, increase, large increase, stable. function implemented fiphde explorer Shiny app (see ?fiphde_launcher()) user can download submission-ready categorical forecasts probabilistic forecast files.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"bug-fixes-0-3-3","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"fiphde 0.3.3","text":"plot_forecast() documentation included example outmoded version ts_fit_forecast() API. updated example code runs current version ts_fit_forecast() function.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"new-features-0-3-2","dir":"Changelog","previous_headings":"","what":"New features","title":"fiphde 0.3.2","text":"release submission script now includes code prepare submission-ready files “experimental” categorical rate change targets.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"bug-fixes-0-3-2","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"fiphde 0.3.2","text":"Previously validation script’s date format check limited 2021 2022. extended check work 2023 dates. R CMD CHECK GitHub action incremented use “v2” R actions, addresses issue failing continuous integration checks failing repository.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"new-features-0-3-1","dir":"Changelog","previous_headings":"","what":"New features","title":"fiphde 0.3.1","text":"release includes rearranged submission script now executes common procedures (data retrieval, package loads, etc.) top script, CREG TSENS can run independently needed.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"bug-fixes-0-3-1","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"fiphde 0.3.1","text":"Prior release explorer app (see ?fiphde_launcher) default visualizations locations multiple submission modeling methods loaded app. However, locations available one model submission files, location(s) remain selected forecast visualizations break missing location(s) unselected model. release, app now default selected locations just present given submission file.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"new-features-0-3-0","dir":"Changelog","previous_headings":"","what":"New features","title":"fiphde 0.3.0","text":"release brings additional data retrieval processing functions. package now includes code adapted cdcfluview query NREVSS surveillance system pull clinical laboratory percent positive flu data. who_nrevss() function unexported used user-facing get_cdc_clin() function, pulls preps percent positive data. complementary function, clin_nowcast(), now available augment clinical laboratory percent positivity nowcasted value. package also now includes helper functions prepare covariates modeling. example, new pois_forc() helper creates forecasted counts based recently observed values. can used create forecasted values number tests number positive flu specimens (therefore percent positivity) feed models include percent positive lab results covariate. new smoothie() function also available create weighted averages recent observations, can used covariate data models.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"bug-fixes-0-2-1","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"fiphde 0.2.1","text":"Minor fix include “start_date” parameter replace_ili_nowcast() function ILI nowcasting can performed retrospectively needed.","code":""},{"path":[]},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"new-features-0-2-0","dir":"Changelog","previous_headings":"","what":"New features","title":"fiphde 0.2.0","text":"release includes code adapted cdcfluview query ILI flu hospitalization data. functions ilinet() hospitalizations(), unexported used helper functions internally. example, ilinet() used exported get_cdc_ili() function. including functions, minimized number dependencies fiphde thereby streamlining package installation procedure.","code":""},{"path":"https://signaturescience.github.io/fiphde/news/index.html","id":"fiphde-010","dir":"Changelog","previous_headings":"","what":"fiphde 0.1.0","title":"fiphde 0.1.0","text":"Initial release !","code":""}]
